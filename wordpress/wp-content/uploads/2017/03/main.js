function getCookie(name){var dc=document.cookie;var prefix=name+"=";var begin=dc.indexOf("; "+prefix);if(begin==-1){begin=dc.indexOf(prefix);if(begin!=0){return null}}else{begin+=2;var end=document.cookie.indexOf(";",begin);if(end==-1){end=dc.length}}return unescape(dc.substring(begin+prefix.length,end))}var chCookie=getCookie("CH");if(chCookie==null){var regExSession=/!.{22}!/;var regExForce=/forcesession=1/;if(!regExSession.test(location.href)&&!regExForce.test(location.href)){var newHref=location.href;if(newHref.indexOf("?")>-1){newHref+="&forcesession=1"}else{newHref+="?forcesession=1"}window.location.replace(newHref)}}$(".brand-index a[href*=#]:not([href=#]), .brand-back-to-top").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var target=$(this.hash);target=target.length?target:$("[name="+this.hash.slice(1)+"]");if(target.length){$("html,body").animate({scrollTop:target.offset().top},1000);return false}}});var checkIfMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return(checkIfMobile.Android()||checkIfMobile.BlackBerry()||checkIfMobile.iOS()||checkIfMobile.Opera()||checkIfMobile.Windows())}};var smallScreen=480,mediumScreen=700,large=1200;var isMobile=false;if(checkIfMobile.any()){isMobile=true;$("html").addClass("isMobile")}var largeimageloaded=false;TLD=document.location.host;TLD=TLD.substring(TLD.lastIndexOf(".",TLD.lastIndexOf(".")-1)+1);document.cookie="ThePage_ECommerce_STATE=expiredbyGN; expires=Thu, 18 Dec 2013 12:00:00 UTC; domain=."+TLD+"; path=/";$(window).ready(function(){$(".pr-snippet-stars").click(function(){prodTabNode.select_frame("R")})});var isAddToWishList=false;var bLazy=new Blazy();$(function(){$("select").selectric({responsive:true,arrowButtonMarkup:'<span class="jenson-icon-double-arrow-down"></span>'});$("#mobile-cat-filter .mobile-cat-filter-toggle").click(function(){$("#mobile-cat-filter ul").slideToggle()});$(".header-account-menu-container").hover(function(){$(".header-account-menu").addClass("active")},function(){$(".header-account-menu").removeClass("active")});prodTabNode.init();$("#pricematch-request").fancybox({href:"#pricematch-popup",autoSize:true,height:475,maxWidth:375});var prodID=$("#hdnProductID").val();$("#btnAddToWish_"+prodID).click(function(){isAddToWishList=true});selectric.init();leftNavigationModule.init();ajaxFilterControls.init();if(document.documentElement.clientWidth>=760){var topMargin=20;if(document.documentElement.clientWidth>=1024){topMargin=126}$("#cart-layout-right-sticky").stickUp({topMargin:topMargin,keepInWrapper:true,wrapperSelector:"#cart-layout"})}bLazy.revalidate()});selectric={init:function(){$("select").selectric({responsive:true,arrowButtonMarkup:'<span class="jenson-icon-double-arrow-down"></span>'})}};var kitPartPriceSum=0;includeKit={addOrChangeKitPart:function(){$(document).on("click",".kit-part-opt-ctrl",function(){var partSkuID=$(this).attr("data-sku-id");var partSkuName=$(this).parents(".kit-part-opt-itm").children(".kit-part-opt-name").text();var partSkuPrice=getDecimal($(this).siblings(".kit-part-opt-price").attr("data-price"));var partID=$(this).parents(".kit-part-opt-list").attr("data-kit-part");var $primarySkuPrice=$(".product-price-adjdefprice .Amount");var primarySkuPriceAmt=getDecimal($primarySkuPrice.text());$.fancybox.close(true);if(partSkuID){var selectedPartOpt=null;$(".prod-includes .part-opt-added").each(function(){if($(this).attr("data-kit-part")==partID){selectedPartOpt=$(this);return false}});$(".prod-includes input[type=hidden]").each(function(){if($(this).attr("data-kit-part")==partID){$(this).val(partSkuID);return false}});if(selectedPartOpt){var prevPartOptPrice=$(selectedPartOpt).attr("data-price");$(selectedPartOpt).children(".part-opt-added-name").text(partSkuName);$(selectedPartOpt).attr("data-price",partSkuPrice);primarySkuPriceAmt=primarySkuPriceAmt-prevPartOptPrice}else{$(".prod-includes").append('<div class="part-opt-added" data-kit-part="'+partID+'" data-price="'+partSkuPrice+'"><span class="part-opt-added-name" >'+partSkuName+'</span><span class="part-opt-remove">Remove</span></div>')}var newTotalFormatted=formatAmt(primarySkuPriceAmt+partSkuPrice);$primarySkuPrice.text(newTotalFormatted);$(".product-price-defprice").hide();kitPartPriceSum+=partSkuPrice}})},removeKitPart:function(){$(document).on("click",".part-opt-remove",function(){$(this).parent().fadeOut(300,function(){$(this).remove()});var partID=$(this).parent().attr("data-kit-part");var $primarySkuPrice=$(".product-price-adjdefprice .Amount");var primarySkuPriceAmt=getDecimal($primarySkuPrice.text());var partPrice=$(this).parent().attr("data-price");var newTotalFormatted=formatAmt(primarySkuPriceAmt-partPrice);$(".prod-includes input[type=hidden]").each(function(){if($(this).attr("data-kit-part")==partID){$(this).val("");return false}});$primarySkuPrice.text(newTotalFormatted);kitPartPriceSum-=partPrice})}};leftNavigationModule={init:function(){var mobileLeftNavToggle=$(".filter-toggle, .myaccount-filter-toggle"),leftNav=$("#bdy-content-left"),listCol=$("#left-nav div.left-nav-lvl0 .lvl0"),filterCol=$("#left-nav #navTree div.left-nav-lvl0 .lvl0");var mobileLeftNav={init:function(){mobileLeftNavToggle.click(function(e){e.preventDefault();if(leftNav.hasClass("active")){mobileLeftNav.hideMobileNav()}else{mobileLeftNav.showMobileNav()}});filterCol.each(function(){var filterGroup=$(this).next("div");var hasChecked=filterGroup.find("input:checked").length;if(hasChecked==0){$(this).children(".jenson-icon-double-arrow-down").toggleClass("jenson-icon-double-arrow-down jenson-icon-double-arrow-right");filterGroup.hide()}else{$(this).toggleClass("nav-arrow-down nav-arrow-right")}});listCol.click(function(){mobileLeftNav.expandFilterOptions($(this))})},showMobileNav:function(){var target=$("body").offset().top;$("html, body").animate({scrollTop:target},300);leftNav.animate({top:"30px"},function(){$(this).animate({left:0},function(){$(this).addClass("active")})})},hideMobileNav:function(){leftNav.animate({left:"-250px"},function(){$(this).removeClass("active");$(this).animate({top:"40%"},function(){})})},expandFilterOptions:function(filterGroup){var arrow=filterGroup.children("span");if(arrow){$(arrow).toggleClass("jenson-icon-double-arrow-right jenson-icon-double-arrow-down");$(arrow).parent().toggleClass("nav-arrow-down nav-arrow-right")}filterGroup.next("div").slideToggle();var nextLeaf=filterGroup.next("div").next("span.leftNav-leaf");nextLeaf.attr("class",nextLeaf.attr("class"))}};mobileLeftNav.init();ssm.addState({id:"desktop",query:"(min-width: 1024px)",onEnter:function(){if(leftNav.hasClass("active")){leftNav.css("left","-250px");leftNav.css("top","40%");leftNav.removeClass("active")}}})}};function closeFadeOutLight(){$("html").removeClass("zoom-inactive");$("#FadeOutLight").hide();$("#added-product").hide();$("body").removeClass("disable-zoom")}var AjaxUtils={sendScreenInfo:function(){var actionUrl=$("#hdnUrlPrefix").val()+"ajax/user";$.ajax({url:actionUrl,data:{action:"screenInfo","ui.ScreenWidth":screen.width,"ui.ScreenHeight":screen.height},async:true,type:"POST"})},loadDRE:function(sku,url){$.ajax({url:url,data:{action:"loadDRE",skuID:sku},async:true,success:function(data){$("#dre-container").html(data)}})},loadSkuAvailability:function(sku,url){$.ajax({url:url,data:{action:"updateSkuAvailability",skuID:sku},async:false,success:function(data){$(".prod-selector-availability .status").html(data)}})},loadPriceMatchUrl:function(skuID,skuCode,prodCode,url){$.ajax({url:url,data:{action:"updatePriceMatchUrl",skuID:skuID,skuCode:skuCode,prodCode:prodCode},async:false,success:function(data){$("#pricematch-popup").html(data)}})},getSelectedSkuInfo:function(prodID){var skuID=$("#hdnSelSkuID"+prodID).val();var qty=$("#qty"+prodID).val();var skuColor="";if(document.getElementById("selColor_mainImg_"+prodID)){skuColor=document.getElementById("selColor_mainImg_"+prodID).innerText}return{prodID:prodID,skuID:skuID,quantity:qty,color:skuColor}},addProductToWishlist:function(thisForm,prodID){if(!prodID){return false}var sku=this.getSelectedSkuInfo(prodID);if(!sku){return false}var actionUrl=$("#hdnUrlPrefix").val()+"ajax/wishlist";$.ajax({url:actionUrl,data:{action:"SaveToWishlist",wishProdID:sku.prodID,wishSkuID:sku.skuID,qty:sku.quantity,att_Name:"Color",att_Value:sku.color},async:false,type:"POST",success:function(data){if(typeof(data)=="String"){data=jQuery.parseJSON(data)}if(data&&data.redirect){window.location.href=data.redirect}}})}};ajaxFilterControls={init:function(){if(!history.pushState){return}history.replaceState({url:location.href},"",location.href);$(document).on("click","#navTree .filter-option-link",function(e){e.preventDefault();var newHref=$(this).attr("href");history.pushState({url:newHref},"",newHref);loadPage(newHref);return false});window.addEventListener("popstate",function(e){e.preventDefault();loadPage(e.state.url)});loadPage=function(href){$(".filter-results-loading").fadeIn();$("#left-nav, .prod-list").addClass("overlay");$("html, body").animate({scrollTop:($("#bdy-content").offset().top-100)},500);$("#bdy-content").load(href+" #bdy-content > *",function(html){leftNavigationModule.init();selectric.init();var title=html.match(/<title>(.*?)<\/title>/)[1].trim();document.title=decodeEntities(title);bLazy.revalidate()})}}};function skuDropDown_Selector(prodID,prodCode,notifyMe){this.prodID=prodID;this.prodCode=prodCode;this.notifyMe=notifyMe;this.addlViewCtrl=null;this.dropDown=$("#SKUSELECTION_"+this.prodID);this.mainImg=$("#product_layout_"+this.prodID+" .product-main-image .prod-addlviews-itm-first .imgBound a");this.init()}skuDropDown_Selector.prototype.init=function(){var thisCtx=this;this.dropDown.find("option").each(function(){$(this).prop("disabled",false)});this.dropDown.change(function(){thisCtx.onChange()});var selOption=this.dropDown.find("option:selected");if(this.dropDown.length>0&&selOption.length==0){selOption=this.dropDown.find("option:first")}this.addlViewCtrl=new AddlViewCtrl(this.prodID,selOption.attr("optionimgkey"),this.mainImg)};skuDropDown_Selector.prototype.onChange=function(){var selector=this.dropDown;var selOption=selector.find("option:selected");var qtyBox=$("#qty"+this.prodID);var qtyMsg=$("#prodQtyMsg_"+this.prodID);var cartBox=$("#btnAddToCartBox_"+this.prodID);var cartBtn=$("#btnAddToCart_"+this.prodID);var cartDisBtn=$("#btnAddToCartDis_"+this.prodID);var wishBtn=$("#btnAddToWish_"+this.prodID);var wishDisBtn=$("#btnAddToWishDis_"+this.prodID);var btnBox=$("#product-buttons_"+this.prodID);var notifyMe=this.notifyMe;var statusElm=$(".prod-selector-availability .status");var urlPrefix=$("#hdnUrlPrefix").val();var uName=$("#hdnUName").val();var couponOffer=$("#productSkuForm_"+this.prodID+" #hasOffer");if(selOption.length==0){return}if(couponOffer.length==0){AjaxUtils.loadPriceMatchUrl($(selOption).val(),$(selOption).attr("skucodeurlencoded"),encodeURIComponent(this.prodCode),urlPrefix+"ajax/"+uName)}switch(selOption.attr("skustatus")){case"INVDSC":if(!selector.hasClass("selector-value-discontinued")){selector.addClass("selector-value-discontinued")}if(cartBox.length>0){cartBox.removeClass("readyforcart")}if(cartBtn.length>0){cartBtn.hide()}if(cartDisBtn.length>0){cartDisBtn.show()}if(wishBtn.length>0){wishBtn.show()}if(wishDisBtn.length>0){wishDisBtn.hide()}if(qtyBox.length>0){qtyBox.prop("disabled",true)}if(qtyMsg.length>0){qtyMsg.html("&nbsp;&nbsp;&nbsp;This SKU is out of stock.")}break;case"INVUVL":if(!selector.hasClass("selector-value-discontinued")){selector.addClass("selector-value-discontinued")}if(cartBox.length>0){cartBox.removeClass("readyforcart")}if(cartBtn.length>0){cartBtn.hide()}if(cartDisBtn.length>0){cartDisBtn.show()}if(wishBtn.length>0){wishBtn.hide()}if(wishDisBtn.length>0){wishDisBtn.show()}if(qtyBox.length>0){qtyBox.prop("disabled",true)}if(qtyMsg.length>0){qtyMsg.html("&nbsp;&nbsp;&nbsp;This SKU is out of stock.")}if(notifyMe){NotifyMeControl($(selOption).val(),"block")}break;case"INVAVL":selector.removeClass("selector-value-discontinued");qtyBox.prop("disabled",false);if(cartBox.length>0){cartBox.addClass("readyforcart")}if(cartBtn.length>0){cartBtn.show()}if(cartDisBtn.length>0){cartDisBtn.hide()}if(wishBtn.length>0){wishBtn.show()}if(wishDisBtn.length>0){wishDisBtn.hide()}if(qtyBox.length>0){qtyBox.prop("disabled",false)}if(qtyMsg.length>0){qtyMsg.html("")}NotifyMeControl("","none");break;default:selector.removeClass("selector-value-discontinued");if(cartBox.length>0){cartBox.removeClass("readyforcart")}if(cartBtn.length>0){cartBtn.show()}if(cartDisBtn.length>0){cartDisBtn.hide()}if(wishBtn.length>0){wishBtn.show()}if(wishDisBtn.length>0){wishDisBtn.hide()}if(qtyBox.length>0){qtyBox.prop("disabled",false)}if(qtyMsg.length>0){qtyMsg.html("")}NotifyMeControl("","none");break}if(couponOffer.length==0){this.set_price(selOption)}this.toggle_images(selOption);if($(selOption).val()!=""){var urlPrefix=$("#hdnUrlPrefix").val();var uName=$("#hdnUName").val();AjaxUtils.loadDRE($(selOption).val(),urlPrefix+"ajax/"+uName);AjaxUtils.loadSkuAvailability($(selOption).val(),urlPrefix+"ajax/"+uName)}else{if($("#productSkuForm_"+this.prodID+" select").val()==""){$(statusElm).html('<span class="status"></span>')}else{$(statusElm).html('<span class="status">Discontinued</span>')}}};skuDropDown_Selector.prototype.set_price=function(jqSelOption){var elmAdjDefPrice=$(".product-pricing .product-price-adjdefprice");var elmDefPrice=$(".product-pricing .product-price-defprice");if(jqSelOption.val()!=""){var adjDefPrice=jqSelOption.attr("adjdefprice");var defPrice=jqSelOption.attr("defprice");var retailPrice=jqSelOption.attr("retailprice");var prcoff=jqSelOption.attr("prcoff");var prcoffText=prcoff+"% off";elmAdjDefPrice.find(".prefix").hide();if(kitPartPriceSum!=0){var adjDefPriceWithKitParts=getDecimal(adjDefPrice)+kitPartPriceSum;elmAdjDefPrice.find(".Amount").html(formatAmt(adjDefPriceWithKitParts))}else{elmAdjDefPrice.find(".Amount").html(adjDefPrice)}if((adjDefPrice==defPrice&&adjDefPrice==retailPrice)||retailPrice=="0.00"||prcoff<5){elmDefPrice.find(".msrp").hide();elmDefPrice.find(".prcoff").html("")}else{elmDefPrice.find(".msrp").show();elmDefPrice.find(".prcoff").html(prcoffText);elmDefPrice.find(".Amount").html((parseFloat(retailPrice.replace(/[^0-9\.]+/g,""))>parseFloat(defPrice.replace(/[^0-9\.]+/g,"")))?retailPrice:defPrice)}}else{elmAdjDefPrice.find(".prefix").show();elmAdjDefPrice.find(".Amount").html(jqSelOption.attr("lowestprice"));if(jqSelOption.attr("lowestmsrp")>0){elmDefPrice.find(".msrp").show();elmDefPrice.find(".prcoff").html(jqSelOption.attr("lowestprcoff"));elmDefPrice.find(".Amount").html(jqSelOption.attr("lowestmsrp"))}else{elmDefPrice.find(".msrp").hide();elmDefPrice.find(".prcoff").hide();elmDefPrice.find(".Amount").hide()}}};skuDropDown_Selector.prototype.toggle_images=function(jqSelOption){if(jqSelOption.val()==""||jqSelOption.val()==undefined){jqSelOption=this.dropDown.find("option:not([value='']):first")}var sOptImgKey=jqSelOption.attr("optionimgkey");if(sOptImgKey==""||sOptImgKey==undefined){return}var sMainImg=jqSelOption.attr("lrgimg");var sZoomImg=jqSelOption.attr("zoomimg");var currentMainImg=this.mainImg;this.addlViewCtrl.key=sOptImgKey;currentMainImg.animate({opacity:0},150,function(){var url="url('"+sMainImg+"')";currentMainImg.css({"background-image":url,"background-position":"50% 50%","background-repeat":"no-repeat"});currentMainImg.find("img").attr("src",sMainImg);currentMainImg.find("img").attr("data-zoom-image",sZoomImg);currentMainImg.find("input").attr("value",sZoomImg);currentMainImg.attr("href",sZoomImg);initZoom(currentMainImg.find(".largImg"));currentMainImg.animate({opacity:1},150)});this.addlViewCtrl.swap_group()};prodTabNode={init:function(){$(".show-more-btn").click(function(e){e.preventDefault();var showButtonArrow=$(this).find(".fa");if(showButtonArrow.hasClass("fa-chevron-down")){showButtonArrow.parent().html('Less <span class="fa fa-chevron-up"></span>')}else{showButtonArrow.parent().html('More <span class="fa fa-chevron-down"></span>')}$(this).siblings(".show-more-content").slideToggle(function(){})});$(".prod-layout-ftr-tabbar .prod-tabbar-node a").each(function(){var parent=$(this).parents(".product-layout-ftr");var isCustom=($(this).parent().hasClass("custom-tab"));$(this).click(function(e){e.preventDefault();prodTabNode.select_frame($(this).attr("data-tab"),parent,isCustom,$(this).attr("data-tab-id"))})});$(".rating-stars").click(function(){$("html, body").animate({scrollTop:$(".prod-tabbar-node").offset().top},1000)});$(".product-layout-ugc-snippets .review-data").click(function(){prodTabNode.select_frame("R")})},select_frame:function(tab,parent,isCustom,customTabID){if(parent==null){parent=$(".product-layout-ftr")}$(".prod-layout-ftr-tabbar .prod-tabbar-node").each(function(){if($(this).attr("data-tab")==tab){$(this).addClass("prod-tab-selected")}else{$(this).removeClass("prod-tab-selected")}});if(isCustom&&customTabID){$(".prod-tabcontent-frame").removeClass("prod-tab-selected");$("#prod-tab-frame-D").addClass("prod-tab-selected");$("html, body").animate({scrollTop:$("#tab-"+customTabID).offset().top},1000)}else{$("html, body").animate({scrollTop:$(".prod-tab-selected").offset().top},1000);$(".prod-layout-ftr-tabcontent .prod-tabcontent-frame").each(function(){if($(this).attr("data-tab")==tab){$(this).addClass("prod-tab-selected")}else{$(this).removeClass("prod-tab-selected")}})}}};function showVideo(){var video=$(".product-video"),images=$(".prod-images-container");if(video.is(":visible")){video.hide();images.show()}else{video.show();images.hide();$(".zoomContainer").remove()}}gHdnOpts="";function JSSelector(prodID,lowestPrice,allowJSSelector){this.myself=this;this.selSkuIdx=null;this.colorBtns=null;this.sizeBtns=null;this.sizeDD=null;this.prodID=prodID;this.mainImg=$("#product_layout_"+this.prodID+" .product-main-image .prod-addlviews-itm-first .imgBound a");this.mainImgContainer=$("#product_layout_"+this.prodID+" .prod-images-container");this.addlViewCtrl=null;this.selColor="";this.selColorLbl="";this.selSize="";this.selSizeLbl="";this.selMainImage="";this.selZoomImage="";this.lowestPrice=lowestPrice;this.allowJSSelector=allowJSSelector;this.couponOffer=$("#productSkuForm_"+this.prodID+" #hasOffer");this.init()}JSSelector.prototype.init=function(){var self=this.myself;if(self.skuArr==null){self.skuArr=eval("arrSku_"+self.prodID)}this.colorBtns=$("#prColor_selector_"+this.prodID+" .prod-attsel-itm");this.sizeBtns=$("#prSize_selector_"+this.prodID+" .prod-attsel-itm");this.sizeDD=$("#prod-attselector-sizes_"+this.prodID);if(this.colorBtns.length>0){this.selColor=$(this.colorBtns[0]).attr("attcolor");this.selColorLbl=$(this.colorBtns[0]).attr("attcolorlbl");this.colorBtns.each(function(){var btn=$(this);if(btn.hasClass("prod-attsel-itm-selected")){self.selColor=btn.attr("attcolor");self.selColorLbl=btn.attr("attcolorlbl")}});if(!self.allowJSSelector){var selector=$("#SKUSELECTION_"+self.prodID);var selectorOpts=selector.children("option");var numColorSkus=selectorOpts.length;gHdnOpts=selector.html();$(selectorOpts).each(function(i){var jsOpt=$(this);if(jsOpt.val()!=""&&jsOpt.attr("attcolor")!=self.selColor){jsOpt.remove();numColorSkus--}else{if(jsOpt.attr("attcolor")==self.selColor){self.selSkuIdx=i-1}}});if(numColorSkus==2){$(selectorOpts[0]).remove();self.set_price();self.statusControl($(selectorOpts[1]).attr("skustatus"))}}this.assignEvent_onclick(this.colorBtns);this.assignEvent_onhover(this.colorBtns);this.addlViewCtrl=new AddlViewCtrl(this.prodID,this.selColor,this.mainImg)}if(this.sizeBtns.length>0){this.assignEvent_onclick(this.sizeBtns);if(this.colorBtns.length==0){this.selSize=$(this.sizeBtns[0]).attr("attsize");this.selSizeLbl=$(this.sizeBtns[0]).attr("attsizelbl")}}if(this.sizeDD.length>0){this.selSize=this.sizeDD.val();this.assignEvent_onchange()}$(".SKUSELECTION").selectric("init")};JSSelector.prototype.assignEvent_onclick=function(jqElmList){var self=this.myself;jqElmList.each(function(){var btn=$(this);var sColor=self.selColor;var sColorLbl=self.selColorLbl;var sMainImg=self.selMainImage;var sZoomImg=self.selZoomImage;var sSize=self.selSize;var sSizeLbl=self.selSize;var sAttr="";if($(this).attr("attcolor")!=undefined){sColor=$(this).attr("attcolor");sColorLbl=$(this).attr("attcolorlbl");sMainImg=$(this).attr("lrgimg");sZoomImg=$(this).attr("zoomimg");sAttr="attcolor"}if($(this).attr("attsize")!=undefined){sSize=$(this).attr("attsize");sSizeLbl=$(this).attr("attsizelbl");sAttr="attsize"}btn.find("a").click(function(){if(sAttr=="attcolor"){self.selColor=sColor;self.selColorLbl=sColorLbl;self.selMainImage=sMainImg;self.selZoomImage=sZoomImg}if(sAttr=="attsize"){self.selSize=sSize;self.selSizeLbl=sSizeLbl}self.select_Sku(gHdnOpts);if(sAttr=="attcolor"){self.toggle_images()}})})};JSSelector.prototype.assignEvent_onhover=function(jqElmList){var self=this.myself;jqElmList.hover(function(){$("#prColor_selector_"+self.prodID+" .selectedColor").html($(this).attr("attcolorlbl"))},function(){$("#prColor_selector_"+self.prodID+" .selectedColor").html(self.selColorLbl)})};JSSelector.prototype.assignEvent_onchange=function(){var self=this.myself;self.sizeDD.change(function(){if($(this).val()&&self.selSize!=$(this).val()){self.selSize=$(this).val();self.select_Sku()}})};JSSelector.prototype.select_Sku=function(hdnOpts){var self=this.myself;var urlPrefix=$("#hdnUrlPrefix").val();var uName=$("#hdnUName").val();if(self.skuArr==null){self.skuArr=eval("arrSku_"+self.prodID)}self.style_nodes();self.set_label();if(!self.allowJSSelector){var selector=$("#SKUSELECTION_"+self.prodID);$(selector).html(hdnOpts);var selectorOpts=selector.children("option");var numColorSkus=selectorOpts.length;$(selectorOpts).each(function(i){var jsOpt=$(this);if(jsOpt.val()!=""&&jsOpt.attr("attcolor")!=self.selColor){jsOpt.remove();numColorSkus--}else{if(jsOpt.attr("attcolor")==self.selColor){self.selSkuIdx=i-1}}});if(numColorSkus==2){selectorOpts[0].remove();self.set_price();self.statusControl()}$("#SKUSELECTION_"+self.prodID+" option:first").prop("selected",true)}else{var selSKUObj=$("#hdnSelSkuID"+self.prodID);var selSKUCode=$("#hdnSelSkuCode"+self.prodID);selSKUObj.val("");selSKUCode.val("");self.selSkuIdx=null;var sDefaultStatus="";if((self.colorBtns.length==0||self.selColor!="")&&((self.sizeBtns.length==0&&self.sizeDD.length==0)||self.selSize!="")){sDefaultStatus="INVDSC";$.each(self.skuArr,function(i){if((self.colorBtns.length==0||this.color==self.selColor)&&((self.sizeBtns.length==0&&self.sizeDD.length==0)||this.size==self.selSize)){if(this.status=="INVAVL"){selSKUObj.val(this.skuID);selSKUCode.val(encodeURIComponent(this.skuCode));if(self.couponOffer.length==0){AjaxUtils.loadPriceMatchUrl(this.skuID,encodeURIComponent(this.skuCode),encodeURIComponent(this.prodCode),urlPrefix+"ajax/"+uName)}}self.selSkuIdx=i;return}})}self.set_price();self.statusControl(sDefaultStatus);if($(selSKUObj).val()!=""){var urlPrefix=$("#hdnUrlPrefix").val();var uName=$("#hdnUName").val();AjaxUtils.loadDRE($(selSKUObj).val(),urlPrefix+"ajax/"+uName)}}};JSSelector.prototype.set_label=function(){var self=this.myself;$("#prColor_selector_"+self.prodID+" .selectedColor").html(self.selColorLbl);$("#prSize_selector_"+self.prodID+" .selectedSize").html(self.selSizeLbl)};JSSelector.prototype.statusControl=function(sDefaultStatus){var self=this.myself;var status=sDefaultStatus;var notifyMe=false;var skuID="";var urlPrefix=$("#hdnUrlPrefix").val();var uName=$("#hdnUName").val();var statusElm=$("#product_layout_"+self.prodID+" .prod-selector-availability .status");if(self.selSkuIdx!=null){if(self.skuArr==null){self.skuArr=eval("arrSku_"+self.prodID)}status=self.skuArr[self.selSkuIdx].status;notifyMe=self.skuArr[self.selSkuIdx].allowNotifyMe;skuID=self.skuArr[self.selSkuIdx].skuID}var cartBox=$("#btnAddToCartBox_"+self.prodID);var cartBtn=$("#btnAddToCart_"+self.prodID);var cartDisBtn=$("#btnAddToCartDis_"+self.prodID);var wishBtn=$("#btnAddToWish_"+self.prodID);var wishDisBtn=$("#btnAddToWishDis_"+self.prodID);var qtyBox=$("#qty"+self.prodID);var qtyMsg=$("#prodQtyMsg_"+self.prodID);switch(status){case"INVUVL":if(cartBox.length>0){cartBox.removeClass("readyforcart")}if(cartBtn.length>0){cartBtn.hide()}if(cartDisBtn.length>0){cartDisBtn.show()}if(wishBtn.length>0){wishBtn.hide()}if(wishDisBtn.length>0){wishDisBtn.show()}if(qtyBox.length>0){qtyBox.prop("disabled",true)}if(qtyMsg.length>0){qtyMsg.html("&nbsp;&nbsp;&nbsp;This SKU is out of stock.")}if(self.sizeDD.length>0&&!self.sizeDD.hasClass("selector-value-discontinued")){self.sizeDD.addClass("selector-value-discontinued")}if(notifyMe){NotifyMeControl(skuID,"block")}break;case"INVDSC":if(cartBox.length>0){cartBox.removeClass("readyforcart")}if(cartBtn.length>0){cartBtn.hide()}if(cartDisBtn.length>0){cartDisBtn.show()}if(wishBtn.length>0){wishBtn.hide()}if(wishDisBtn.length>0){wishDisBtn.show()}if(qtyBox.length>0){qtyBox.prop("disabled",true)}if(self.sizeDD.length>0&&!self.sizeDD.hasClass("selector-value-discontinued")){self.sizeDD.addClass("selector-value-discontinued")}NotifyMeControl("","none");break;case"INVAVL":if(cartBox.length>0){cartBox.addClass("readyforcart")}if(cartBtn.length>0){cartBtn.show()}if(cartDisBtn.length>0){cartDisBtn.hide()}if(wishBtn.length>0){wishBtn.show()}if(wishDisBtn.length>0){wishDisBtn.hide()}if(qtyBox.length>0){qtyBox.prop("disabled",false)}if(qtyMsg.length>0){qtyMsg.html("")}if(self.sizeDD.length>0){self.sizeDD.removeClass("selector-value-discontinued")}NotifyMeControl("","none");break;default:if(cartBox.length>0){cartBox.removeClass("readyforcart")}if(cartBtn.length>0){cartBtn.show()}if(cartDisBtn.length>0){cartDisBtn.hide()}if(wishBtn.length>0){wishBtn.show()}if(wishDisBtn.length>0){wishDisBtn.hide()}if(qtyBox.length>0){qtyBox.prop("disabled",false)}if(qtyMsg.length>0){qtyMsg.html("")}if(self.sizeDD.length>0){self.sizeDD.removeClass("selector-value-discontinued")}NotifyMeControl("","none");break}if(skuID!=""){AjaxUtils.loadSkuAvailability(skuID,urlPrefix+"ajax/"+uName)}else{if($("#productSkuForm_"+self.prodID+" select").val()==""){$(statusElm).html('<span class="status"></span>')}else{$(statusElm).html('<span class="status">Discontinued</span>')}}};JSSelector.prototype.set_price=function(){var self=this.myself;if(self.couponOffer.length>0){return}var elmAdjDefPrice=$("#product_layout_"+self.prodID+" .product-pricing .product-price-adjdefprice");var elmDefPrice=$("#product_layout_"+self.prodID+" .product-pricing .product-price-defprice");if(self.selSkuIdx!=null){var adjDefPrice=self.skuArr[self.selSkuIdx].adjdefprice;var defPrice=self.skuArr[self.selSkuIdx].defprice;var retailPrice=self.skuArr[self.selSkuIdx].retailprice;var prcoff=self.skuArr[self.selSkuIdx].prcoff;var prcoffText=prcoff+"% off";elmAdjDefPrice.find(".prefix").hide();if(self.skuArr==null){self.skuArr=eval("arrSku_"+self.prodID)}if(kitPartPriceSum!=0){var adjDefPriceWithKitParts=getDecimal(adjDefPrice)+kitPartPriceSum;elmAdjDefPrice.find(".Amount").html(formatAmt(adjDefPriceWithKitParts))}else{elmAdjDefPrice.find(".Amount").html(adjDefPrice)}if((adjDefPrice==defPrice&&adjDefPrice==retailPrice)||retailPrice=="0.00"||prcoff<5){elmDefPrice.find(".msrp").hide();elmDefPrice.find(".prcoff").html("")}else{elmDefPrice.find(".msrp").show();elmDefPrice.find(".prcoff").html(prcoffText);elmDefPrice.find(".Amount").html((parseFloat(retailPrice.replace(/[^0-9\.]+/g,""))>parseFloat(defPrice.replace(/[^0-9\.]+/g,"")))?retailPrice:defPrice)}}else{elmAdjDefPrice.find(".prefix").show();elmAdjDefPrice.find(".Amount").html(self.lowestPrice)}};JSSelector.prototype.style_nodes=function(){var self=this.myself;self.colorBtns.each(function(){if($(this).attr("attcolor")==self.selColor){if(!$(this).hasClass("prod-attsel-itm-selected")){$(this).addClass("prod-attsel-itm-selected")}}else{$(this).removeClass("prod-attsel-itm-selected")}});self.sizeBtns.each(function(){if(self.colorBtns.length>0){$(this).addClass("prod-attsel-itm-discontinued")}if($(this).attr("attsize")==self.selSize){if(!$(this).hasClass("prod-attsel-itm-selected")){$(this).addClass("prod-attsel-itm-selected")}}else{$(this).removeClass("prod-attsel-itm-selected")}});if(self.colorBtns.length>0&&self.sizeDD.length>0){self.sizeDD.find("option").each(function(){if($(this).val()!=""&&!$(this).hasClass("prod-attsel-opt-discontinued")){$(this).addClass("prod-attsel-opt-discontinued");$(this).css("color","#999999");$(this).prop("disabled",true)}})}this.style_disabled_nodes()};JSSelector.prototype.style_disabled_nodes=function(){var self=this.myself;var sizeOpts=null;if(self.sizeDD.length>0){sizeOpts=self.sizeDD.find("option")}if(self.skuArr==null){self.skuArr=eval("arrSku_"+self.prodID)}if(self.colorBtns.length>0&&(self.sizeBtns.length>0||(sizeOpts!=null&&sizeOpts.length>0))){$.each(this.skuArr,function(){if(this.color==self.selColor){if(this.status!="INVDSC"){if(self.sizeBtns.length>0){self.sizeBtns.filter("[attsize='"+this.size+"']").removeClass("prod-attsel-itm-discontinued");if(this.status=="INVUVL"){self.sizeBtns.filter("[attsize='"+this.size+"']").addClass("prod-attsel-itm-unavail")}}else{if(sizeOpts.length>0){if(this.status=="INVAVL"){sizeOpts.filter("[value='"+this.size+"']").removeClass("prod-attsel-opt-discontinued");sizeOpts.filter("[value='"+this.size+"']").css("color","#000000");sizeOpts.filter("[value='"+this.size+"']").prop("disabled",false)}}}}}})}};JSSelector.prototype.toggle_images=function(){var self=this.myself;var url="url('"+self.selMainImage+"')";self.mainImg.css({"background-image":url,"background-position":"50% 50%","background-repeat":"no-repeat"});self.mainImg.attr("href",self.selZoomImage);self.addlViewCtrl.key=self.selColor;self.addlViewCtrl.swap_group()};function GallerySwatchCtrl(prodID,url){this.myself=this;this.selSkuIdx=null;this.url=url;this.prodID=prodID;this.colorBtns=$("#prColor_selector_"+this.prodID+" .prod-attsel-itm");this.selColor="";this.selMainImage="/Images/NoImg_Gallery_Main.jpg";this.mainImgLnk=$(".prod-list #lnkLstImg"+this.prodID);this.mainLstLnk=$(".prod-list #lnkLstItm"+this.prodID);this.mainImg=$(".prod-list #lnkLstImg"+this.prodID).children("img");this.init()}GallerySwatchCtrl.prototype.init=function(){if(this.colorBtns.length>0){this.selColor=$(this.colorBtns[0]).attr("attcolor");this.assignEvent_onclick()}};GallerySwatchCtrl.prototype.assignEvent_onclick=function(){var self=this.myself;this.colorBtns.each(function(){var btn=$(this);var sColor=$(this).attr("attcolorlbl");var sMainImg=$(this).attr("lrgimg");btn.find("a").click(function(){self.selColor=sColor;self.selMainImage=sMainImg;self.set_styles();self.toggle_images()})})};GallerySwatchCtrl.prototype.set_styles=function(){var self=this.myself;this.colorBtns.each(function(){var btn=$(this);if(btn.attr("attcolorlbl")==self.selColor){btn.addClass("prod-attsel-itm-selected")}else{btn.removeClass("prod-attsel-itm-selected")}})};GallerySwatchCtrl.prototype.toggle_images=function(){var self=this.myself;self.mainImg.attr("src",self.selMainImage);self.mainImgLnk.attr("href",self.url+"?cs="+self.selColor);self.mainLstLnk.attr("href",self.url+"?cs="+self.selColor)};function AddlViewCtrl(prodID,curkey,mainImg){this.prodID=prodID;this.key=curkey;this.mainImg=mainImg;if(this.mainImg==null){this.mainImg=$(".product-main-image .imgBound a")}this.curGroup=$(".prod-addl-views-group-select");this.curGroupBtns=this.curGroup.find(".prod-addlviews-itm");this.groups=$(".prod-addl-views-group");this.imageGroups=$(".prod-images-group");this.btns=$(".prod-addlviews-itm");this.upCtrl=$(".prod-addl-views-ctrl-up");this.downCtrl=$(".prod-addl-views-ctrl-down");this.slideCtrl=$(".prod-addl-views-ctrl-slide");this.groupAllowSlide=false;this.btns.css("cursor","pointer");this.assignEvent_onclick();this.group_init_slidectrl()}AddlViewCtrl.prototype.assignEvent_onclick=function(){var self=this;$(".prod-addl-views-group").on("click",".prod-addlviews-itm ",function(){self.select_addlview($(this))})};AddlViewCtrl.prototype.select_addlview=function(btn){if($(".product-video").is(":visible")){$(".product-video").hide();$(".prod-images-container").show()}var self=this;var currentSlickSlider=$(".prod-images-container .slick-initialized");var nextSlideIndex=btn.index();if($(".product-videos-thumb").length>0){nextSlideIndex--}currentSlickSlider.slick("slickGoTo",nextSlideIndex);var newZoomImg=currentSlickSlider.find(".slick-slide").eq(nextSlideIndex).find("img");initZoom(newZoomImg)};AddlViewCtrl.prototype.swap_group=function(){if($(".product-video").is(":visible")){$(".product-video").hide();$(".prod-images-container").show()}var self=this;if(self.key==""||self.key==null){return}self.groups.each(function(){var grpThis=$(this);if(grpThis.attr("prodID")==self.prodID){if((grpThis.attr("attcolor")!=undefined&&grpThis.attr("attcolor")==self.key)||(grpThis.attr("attoptionkey")!=undefined&&grpThis.attr("attoptionkey")==self.key)){grpThis.css("margin-top","0px");grpThis.show();var thumbs=grpThis.find(".prod-addlviews-itm");self.curGroup=grpThis;self.curGroupBtns=thumbs;self.group_init_slidectrl()}else{grpThis.hide()}}});self.imageGroups.each(function(){var grpThis=$(this);if(grpThis.attr("prodID")==self.prodID){if((grpThis.attr("attcolor")!=undefined&&grpThis.attr("attcolor")==self.key)||(grpThis.attr("attoptionkey")!=undefined&&grpThis.attr("attoptionkey")==self.key)){grpThis.show();var zoomImg=$(grpThis).find(".prod-images-itm:first-child img");initZoom(zoomImg);if(!grpThis.hasClass("slick-initialized")){slickProductImage(grpThis)}}else{if(grpThis.hasClass("slick-initialized")){grpThis.slick("unslick")}grpThis.hide()}}});slickAdditionalViews();$(".product-attskuselector select").selectric("init")};AddlViewCtrl.prototype.group_init_slidectrl=function(){var self=this;self.groupAllowSlide=false;self.upCtrl.css({cursor:"default","background-image":"none"});if(self.curGroupBtns.length>4){self.groupAllowSlide=true;self.downCtrl.css({cursor:"pointer",background:"transparent url(/images/buttons/down_arw.jpg) no-repeat scroll 50% 50%"})}else{self.downCtrl.css({cursor:"default","background-image":"none"})}};AddlViewCtrl.prototype.slide_group=function(operator){var self=this;if(!self.groupAllowSlide){return}var groupPosTop=parseInt(self.curGroup.css("marginTop").replace("px",""));var slideHeight=self.slideCtrl.height();var groupHeight=self.curGroup.height();var maxSlide=slideHeight-groupHeight;if((groupPosTop>=0&&operator>=0)||(groupPosTop<=maxSlide&&operator<=0)){return}var adjustment=90*operator;var newPosition=groupPosTop+adjustment;var newRange=90;if(operator<0&&newPosition<maxSlide){newRange-=(newPosition-maxSlide)}if(operator>0&&newPosition>0){newRange-=newPosition}var rangeTxt="-="+newRange+"px";if(operator>0){rangeTxt="+="+newRange+"px"}self.curGroup.animate({marginTop:rangeTxt},"fast");if(newPosition>=0){self.upCtrl.css({cursor:"default","background-image":"none"})}else{self.upCtrl.css({cursor:"pointer",background:"transparent url(/images/buttons/up_arw.jpg) no-repeat scroll 50% 50%"})}if(newPosition<=maxSlide){self.downCtrl.css({cursor:"default","background-image":"none"})}else{self.downCtrl.css({cursor:"pointer",background:"transparent url(/images/buttons/down_arw.jpg) no-repeat scroll 50% 50%"})}};loadDREAjax=function(sku,url){AjaxUtils.loadDRE(sku,url)};loadSkuAvailabilityAjax=function(sku,url){AjaxUtils.loadSkuAvailability(sku,url)};loadPriceMatchUrlAjax=function(skuID,skuCode,prodCode,url){AjaxUtils.loadPriceMatchUrl(skuID,skuCode,prodCode,url)};function PopoverMessagePosition(elm){var adjElm=$("#bdy-content #added-product");if(elm=="priceMatch"){adjElm=$("#pricematch-popup")}if(adjElm.length==0){return false}var leftOffset=-($(adjElm).width()/2);$(adjElm).css("marginLeft",leftOffset+"px");$(adjElm).css("opacity","1");if(elm=="priceMatch"){$(adjElm).show()}$("html").addClass("zoom-inactive");return true}function PopoverMessage(elm){if(PopoverMessagePosition(elm)){$("#FadeOutLight").show()}$("body").addClass("disable-zoom")}$(window).resize(function(){PopoverMessagePosition()});function NotifyMeControl(skuID,dispStyle){if($("#NotifyMe")){$("#formSkuID").val(skuID);$("#NotifyMe").css("display",dispStyle)}}function launchPopup(url,name,width,height,popupName){var leftOffset=(screen.width/2)-(width/2);var topOffset=(screen.height/2)-(height/2);var win=window.open(url,name,"width="+width+", height="+height+", left="+leftOffset+", top="+topOffset+"location=no, menubar=no, status=no, toolbar=no, scrollbars=yes, resizable=no");win.resizeTo(width,height);win.focus()}var popupOffer={offer:function(prodID,mustDecline){var popup=$("#coupon-product-detail");var sURL=$("#hdnUrlPrefix").val()+"ajax/Coupon";var params={action:"couponOffer",prodID:prodID};popupOffer.load_Ajax(sURL,popup,params)},load_Ajax:function(ajaxUrl,elContentBdy,dataParams){$.get(ajaxUrl,dataParams,function(data){$("#coupon-product-detail").html(data);if($.trim(data)!=""&&data!=null){$("#FadeOut").height($("#Page").innerHeight());$("#FadeOut").show();$("#FadeOut").unbind("click");var popTop=($(window).height()>elContentBdy.height())?($(window).height()/2-elContentBdy.height()/2):50;var popLeft=($(window).width()>elContentBdy.width())?($(window).width()/2-elContentBdy.width()/2):20;if(popTop<0){popTop=popTop*-1}if(popLeft<0){popLeft=popLeft*-1}popTop+=$(window).scrollTop();elContentBdy.css({position:"absolute",top:popTop,left:popLeft,margin:"0px auto 0px auto"});tabControl.init();griptape.init();productElem.init();elContentBdy.show()}})},hideOffer:function(){$("#FadeOut").hide();$("#coupon-product-detail").hide();$("#coupon-product-detail").html("")}};function displaySkuInfo(selectBox,infoArray,PriceSpan){if(selectBox.selectedIndex!=0){var info=infoArray[selectBox.options[selectBox.selectedIndex].value];var strkAmt="";if(PriceSpan=="DisplayPrice"){StatusControl(info,info.prodID)}}}function TellaFriend(){$("#TellaFriend").toggle()}function swap_PayMethods(elm){var payTypeVal=$(elm).val();$(".myaccount-payment-type").removeClass("payment-type-selected");$(elm).parents(".myaccount-payment-type").addClass("payment-type-selected");$(".payment-method-type-info").each(function(){if($(this).attr("id")=="type"+payTypeVal){$(this).show()}else{$(this).hide()}})}function validate_required(field,alerttxt){with(field){if(value==null||value==""){alert(alerttxt);return false}else{return true}}}var skuFormBtnClicked=null;function validate_skuforms(thisform,prodID,productType){if(productType==null){productType=""}var bValidated=false;var sMsg="";switch(thisform.name){case"productSkuForm":if(productType=="PTeGiftCard"||productType=="PTGiftCardMailed"){break}if(skuFormBtnClicked=="declineOffer"){return true;break}var selSku=$("#SKUSELECTION_"+prodID+" option:selected").val();if(selSku==null){selSku=$("#hdnSelSkuID"+prodID).val()}var prodQty=$("#qty"+prodID).val();if(selSku!=""&&selSku!=null){bValidated=true}else{if(prodID!=null&&prodID!=""&&isAddToWishList){bValidated=true}else{sMsg="Error! You must select a SKU"}}if(prodQty==""){if(selSku!=""){sMsg=""}else{sMsg+=" \n"}sMsg+="Error! Enter a quantity";bValidated=false}if(!bValidated){alert(sMsg)}if(isAddToWishList){AjaxUtils.addProductToWishlist(thisform,prodID)}return bValidated;break;case"productBundleForm":with(thisform){for(i=0;i<elements.length;i++){if(!validate_required(elements[i],"Error! You must select a SKU")){elements[i].focus();return false;break}}}default:return true;break}}var address={defaultPostalCodeMaxLength:null};function displayProvinceDropDown(country_list,province_list,list){var country="";var pre_selected=list.value;var country=country_list.value;var provinces=null;var txtZip=$("#txtZip");if(address.defaultPostalCodeMaxLength==null){address.defaultPostalCodeMaxLength=txtZip.attr("maxlength")}if(country=="U0000USA"){txtZip.attr("maxlength","5");txtZip.val(txtZip.val().substr(0,5))}else{txtZip.attr("maxlength",address.defaultPostalCodeMaxLength)}for(var i=0;i<province_list.length;i++){if(province_list[i].name==country){provinces=province_list[i].provinces;break}}list.innerHTML="";if(provinces==null||provinces.length==0){$("#state-row").hide()}else{$("#state-row").show()}var o=document.createElement("option");o.innerHTML="Please Select A State/Province";list.appendChild(o);for(var i=0;i<provinces.length;i++){var province=provinces[i];var o=document.createElement("option");o.setAttribute("value",province.id);o.innerHTML=province.name;if(province.id==pre_selected){o.setAttribute("selected","selected")}list.appendChild(o)}$("#province_list").selectric("init")}function CheckRightSku(){if(document.getElementById("SKUSELECTION")){document.getElementById("formSkuID").value=document.getElementById("SKUSELECTION").value}}function remove_BG(oObj){oObj.style.backgroundPosition="300px"}function PopupCenter(pageURL,title,w,h){var left=(screen.width/2)-(w/2);var top=(screen.height/2)-(h/2);var targetWin=window.open(pageURL,title,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+w+", height="+h+", top="+top+", left="+left)}function showGiftWrap(ordItemID){if(_$("cart-kitpart-elements-"+ordItemID).style.display=="block"){_$("cart-kitpart-elements-"+ordItemID).style.display="none";_$("cart-kitpart-values-"+ordItemID).style.display="block"}else{_$("cart-kitpart-elements-"+ordItemID).style.display="block";_$("cart-kitpart-values-"+ordItemID).style.display="none"}}function showGiftMsg(ctrlContainer,elm,elmMsg,ordItemID,elmSel,defSku){var bFireShowGiftCtrls=true;var giftCtrlCntr=$("#"+ctrlContainer);var jqElm=null;var jqElmMsg=null;var jqElmMsgTxt=null;var jqElmSel=null;var jqElmSelCtrl=null;var jqElmBtnCtrls=null;var hdnRemoveElm=null;if(giftCtrlCntr.length>0){jqElm=giftCtrlCntr.find("#"+elm);jqElmMsg=giftCtrlCntr.find("#"+elmMsg);jqElmMsgTxt=giftCtrlCntr.find("#"+elmMsg+"-value");jqElmSel=giftCtrlCntr.find("#"+elmSel);jqElmSelCtrl=giftCtrlCntr.find("#"+elmSel+"-ctrl");jqElmBtnCtrls=giftCtrlCntr.find("#cart-kitpart-ctrls-"+ordItemID);hdnRemoveElm=giftCtrlCntr.find("#REMOVEGWM_"+ordItemID)}if(jqElmMsg!=null&&jqElmMsg.length>0){if(jqElm.prop("checked")==true){jqElmMsg.css("display","block");if(hdnRemoveElm!=null&&hdnRemoveElm.length>0){hdnRemoveElm.val("")}}else{if(jqElm.prop("selectedIndex")>0){jqElmMsg.css("display","block");if(hdnRemoveElm!=null&&hdnRemoveElm.length>0){hdnRemoveElm.val("")}}else{if(_$("CartForm")){if(elmSel=="true"){_$("CartForm").submit();return}else{bFireShowGiftCtrls=false}}}}if(jqElmMsgTxt!=null&&jqElmMsgTxt.length>0){jqElmMsgTxt.css("display","none")}if(jqElmSel!=null&&jqElmSel.length>0){jqElmSel.css("display","none")}if(jqElmSelCtrl!=null&&jqElmSelCtrl.length>0){jqElmSelCtrl.css("display","block")}}if(bFireShowGiftCtrls){showGiftCtrls(jqElmBtnCtrls)}var optVal=jqElm.val();if(optVal==defSku){if(jqElmMsg!=null&&jqElmMsg.length>0){jqElmMsg.css("display","none")}if(hdnRemoveElm!=null&&hdnRemoveElm.length>0){hdnRemoveElm.val(ordItemID)}}}function showGiftCtrls(jqElmBtnCtrls){if(jqElmBtnCtrls!=null&&jqElmBtnCtrls.length>0){jqElmBtnCtrls.css("display","block")}}function hideGiftCtrls(ordItemID){if(_$("cart-kitpart-ctrls-"+ordItemID)){_$("cart-kitpart-ctrls-"+ordItemID).style.display="none"}}function currencyLightbox(triggerFormID){$.fancybox("#currency-notice-wrapper",{autoSize:true,autoHeight:true,maxWidth:400,beforeClose:function(){document.forms[triggerFormID].submit()}})}function ismaxlength(obj){var mlength=obj.getAttribute?parseInt(obj.getAttribute("maxlength")):"";if(obj.getAttribute&&obj.value.length>mlength){obj.value=obj.value.substring(0,mlength)}}function inputRestrict(countryInput,zipCodeInput,homePhoneInput,workPhoneInput){$(countryInput).change(function(){country=$(countryInput+" option:selected").val();if(country!="U0000USA"){$(zipCodeInput).removeAttr("maxlength");$(homePhoneInput).removeAttr("maxlength");$(workPhoneInput).removeAttr("maxlength")}else{$(zipCodeInput).attr("maxlength",10);$(homePhoneInput).attr("maxlength",10);$(workPhoneInput).attr("maxlength",10)}})}function hideThisShowThat(hideElm,showElm){$(hideElm).fadeOut(300,function(){$(showElm).fadeIn(300)})}function preload_HiddenImgs(){var arrObj=arrImgPreLoad.split(",");for(i=1;i<arrObj.length;i++){var img=new Image();img.src=arrObj[i]}}function slickProductImage(group){group.slick({arrows:false,dots:false,adaptiveHeight:true,mobileFirst:true,infinite:false,responsive:[{breakpoint:smallScreen,settings:{dots:false,swipe:false,fade:true}}]})}function slickAdditionalViews(){if($(".prod-addl-views-group").hasClass("slick-initialized")){$(".prod-addl-views-group").slick("unslick")}var slickSettings={infinite:false,slidesToShow:4,slidesToScroll:4,arrows:true,prevArrow:'<a class="slider-prev" href="#">Prev</a>',nextArrow:'<a class="slider-next" href="#">Next</a>',mobileFirst:true,dots:false,swipe:true,responsive:[{breakpoint:480,settings:{slidesToShow:4}},{breakpoint:580,settings:{slidesToShow:5}},{breakpoint:759,settings:{slidesToShow:6}},{breakpoint:1228,settings:{slidesToShow:7}}]};$(".prod-addl-views-group").slick(slickSettings);$(".prod-addl-views-group").css({opacity:1})}function initZoom(zoomImg){if(!isMobile){var img=zoomImg;$(".zoomContainer").remove();img.removeData("elevateZoom");img.removeData("zoomImage");img.elevateZoom({zoomType:"inner",zoomWindowPosition:1,zoomWindowFadeIn:200,zoomWindowFadeOut:200,lensFadeIn:200,lensFadeOut:200,cursor:"crosshair"})}}var smallScreen=480,mediumScreen=760,large=1024;$(document).ready(function(e){$("img[usemap]").rwdImageMaps();$("#CartForm .quantityBoxReal").keyup(function(){var smallInput=$(this).attr("name")+"_small";$("input[name="+smallInput+"]").val($(this).val())});$("#CartForm .quantityPlaceholder").keyup(function(){var realInput=$(this).attr("name").replace("_small","");$("input[name="+realInput+"]").val($(this).val())});$(".malWishList .input-want").keyup(function(){$(".malWishList .input-want-placeholder").val($(this).val())});$(".malWishList .input-want-placeholder").keyup(function(){$(".malWishList .input-want").val($(this).val())});$("#search-toggle").click(function(e){e.preventDefault();$(".product-search-wrapper").slideToggle()});var MainNavigationModule=(function(){var mainNavElem=$("#main-nav"),mobileMenuToggle=$("#menu-toggle"),currentMenuPage=1;var MobileNav={init:function(){this.destroy();mainNavElem=mainNavElem.clone();$("#Page").before(mainNavElem);$("#Page #main-nav").remove();mainNavElem.show();mobileMenuToggle.click(function(e){e.preventDefault();MobileNav.toggleMainNav()});$(".close-mobile-menu").click(function(e){e.preventDefault();MobileNav.toggleMainNav()});$("#FadeOut").click(function(){if($("body").hasClass("opened-sidebar")){MobileNav.toggleMainNav()}});$(".back-mobile-menu").click(function(e){e.preventDefault();MobileNav.showPreviousMenu()});mainNavElem.find(".nav-lvl-1 > li > a").click(function(e){var nextMenu=$(this).next();if(nextMenu.length>0){e.preventDefault();MobileNav.showNextMenu(this)}});mainNavElem.find(".nav-lvl-2 > li > a, .nav-lvl-3 > li > a, .nav-lvl-4 > li > a").click(function(e){e.preventDefault();if($(this).parent().find("ul").length>0){MobileNav.showNextMenu(this)}else{window.location.href=$(this).attr("href")}})},showPreviousMenu:function(){currentMenuPage--;var prevItemSelector=".nav-lvl-"+(currentMenuPage+1),nextItemSelector=".nav-lvl-"+currentMenuPage;if(currentMenuPage==1){$(".close-mobile-menu").show();$(".back-mobile-menu").hide()}else{if(currentMenuPage>=2){$(".close-mobile-menu").hide();$(".back-mobile-menu").show()}else{$(".close-mobile-menu").hide();$(".back-mobile-menu").hide()}}mainNavElem.find(".nav-lvl-1").animate({left:"+=300"},function(){$(prevItemSelector).hide()})},showNextMenu:function(selected){currentMenuPage++;var prevItemSelector=".nav-lvl-"+(currentMenuPage-1),nextItemSelector=".nav-lvl-"+currentMenuPage;$(selected).siblings(nextItemSelector).show();if(currentMenuPage>1){$(".close-mobile-menu").hide();$(".back-mobile-menu").show()}else{$(".close-mobile-menu").show();$(".back-mobile-menu").hide()}mainNavElem.find(".nav-lvl-1").animate({left:"-=300"})},destroy:function(){mobileMenuToggle.unbind("click");mainNavElem.find("> ul > li > a").unbind("click");$("body").removeClass("opened-sidebar");$("body").removeAttr("style");$("#FadeOut").hide();if($("#main-nav-container #main-nav").length==0){mainNavElem=mainNavElem.clone();$("#sub-nav-container").before(mainNavElem);$("body > #main-nav").remove()}$(".nav-lvl-1, .nav-lvl-2, .nav-lvl-3").removeAttr("style")},toggleMainNav:function(elem){if(!$("body").hasClass("opened-sidebar")){$("body").addClass("opened-sidebar");$("#FadeOut").fadeIn();$("#Page").animate({left:"+=300"});mainNavElem.animate({left:"+=300"},function(){})}else{$("#FadeOut").fadeOut(200);$("#Page").animate({left:"-=300"},function(){$("body").removeClass("opened-sidebar")});mainNavElem.animate({left:"-=300"},function(){$("body").removeClass("opened-sidebar")})}},showSubNav:function(elem){elem.find(".toggle-submenu").removeClass("fa-chevron-down");elem.find(".toggle-submenu").addClass("fa-close");elem.addClass("sub-active");elem.next().slideDown()},hideSubNav:function(elem){elem.find(".toggle-submenu").addClass("fa-chevron-down");elem.find(".toggle-submenu").find(".toggle-submenu").removeClass("fa-close");elem.next().slideUp();elem.removeClass("sub-active")}};var DesktopNav={overID:"",onMainNav:false,currentSubID:"",currentSubSubID:"",onSubNavArea:false,onSubSubLink:false,onSubSubMenu:false,delay:150,delayTimer:null,init:function(){if(isMobile){$(".main-nav-body .nav-lvl-1").on("click","> li > a",function(e){if($(this).parent().attr("pid")){e.preventDefault()}$(".sub-nav-links li .over").removeClass("over");$(".sub-nav-2.over").removeClass("over");$(".sub-nav-links li:first-child a").addClass("over");$(".sub-nav-2:first-child").addClass("over");$(".sub-nav-1.over").removeClass("over");if(DesktopNav.currentSubID==""){DesktopNav.onMainNav=true;$(this).parent().addClass("over");DesktopNav.currentSubID=$(this).parent().attr("pid");DesktopNav.showSubNav();$("#sub-nav-container").animate({height:$("#"+DesktopNav.currentSubID).height()+50},300,function(){$(this).addClass("subnav-opened")})}else{var currentSubMenu=$("#"+DesktopNav.currentSubID);$(".nav-lvl-1 li").removeClass("over");$("#"+DesktopNav.currentSubID).find(".over").removeClass("over");if($(this).parent().attr("pid")==DesktopNav.currentSubID){DesktopNav.currentSubID="";DesktopNav.onMainNav=false;$("#sub-nav-container").animate({height:"0"})}else{$(this).parent().addClass("over");DesktopNav.currentSubID=$(this).parent().attr("pid");DesktopNav.showSubNav();$("#sub-nav-container").animate({height:$("#"+DesktopNav.currentSubID).height()+50},300,function(){$(this).addClass("subnav-opened")})}}});$("#sub-nav-container").on("click",".sub-nav-links > ul > li > a",function(e){e.preventDefault();var currentSubMenu=$("#"+DesktopNav.currentSubID);if(DesktopNav.currentSubSubID==""){currentSubMenu.find(".subsub-nav-default").hide();currentSubMenu.find(".over").removeClass("over");$(this).addClass("over");DesktopNav.onSubSubLink=true;DesktopNav.currentSubSubID=$(this).parent().attr("nid");DesktopNav.showSubSubNav($(this))}else{if($(this).parent().attr("nid")==DesktopNav.currentSubSubID){currentSubMenu.find(".subsub-nav-default").show();currentSubMenu.find(".over").removeClass("over");DesktopNav.onSubSubLink=false;DesktopNav.currentSubSubID=""}else{currentSubMenu.find(".subsub-nav-default").hide();currentSubMenu.find(".over").removeClass("over");$(this).addClass("over");DesktopNav.currentSubSubID=$(this).parent().attr("nid");DesktopNav.showSubSubNav($(this))}}})}else{var menuDelay=300,menuTimer;$(".nav-lvl-1 li").hover(function(){var hoverItem=$(this).attr("pid");menuTimer=setTimeout(function(){DesktopNav.onMainNav=true;DesktopNav.currentSubID=hoverItem;DesktopNav.showSubNav();$(".sub-nav-links li .over").removeClass("over");$(".sub-nav-2.over").removeClass("over");$(".sub-nav-links li:first-child a").addClass("over");$(".sub-nav-2:first-child").addClass("over");$('.nav-lvl-1 li[pid="'+DesktopNav.currentSubID+'"]').addClass("over");$("#sub-nav-container").animate({height:$("#"+DesktopNav.currentSubID).height()+50},300,function(){$(this).addClass("subnav-opened")})},menuDelay)},function(){clearTimeout(menuTimer);DesktopNav.onMainNav=false;DesktopNav.currentSubID="";DesktopNav.hideSubNav()});$(".sub-nav-1").hover(function(){DesktopNav.onSubNavArea=true},function(){DesktopNav.onSubNavArea=false;clearTimeout(DesktopNav.delayTimer);DesktopNav.delayTimer=setTimeout(function(){if(DesktopNav.currentSubID==""&&!DesktopNav.onSubNavArea){$("#sub-nav-container").animate({height:"0"},DesktopNav.delay,function(){$(this).removeClass("subnav-opened");$(".nav-lvl-1 li.over").removeClass("over");$(".sub-nav-links .over").removeClass("over");$(".sub-nav-2.over").removeClass("over");$(".zoomContainer").css("z-index","99")})}},DesktopNav.delay)});$(".sub-nav-links > ul > li").hover(function(){$(".sub-nav-links .over").removeClass("over");$(".sub-nav-2.over").removeClass("over");var currentElem=$(this);currentElem.find("> a").addClass("over");DesktopNav.currentSubSubID=currentElem.attr("nid");$("#"+DesktopNav.currentSubSubID).addClass("over");$("#sub-nav-container").css("height",$(".sub-nav-1.over").height()+50)})}},showSubNav:function(pid){$(".zoomContainer").css("z-index","0");$(".sub-nav-1.over").removeClass("over");$(".nav-lvl-1 li.over").removeClass("over");$("#"+DesktopNav.currentSubID).addClass("over")},showSubSubNav:function(){$("#"+DesktopNav.currentSubSubID).addClass("over")},hideSubNav:function(){clearTimeout(DesktopNav.delayTimer);DesktopNav.delayTimer=setTimeout(function(){if(DesktopNav.currentSubID==""&&!DesktopNav.onSubNavArea){$("#sub-nav-container").animate({height:"0"},DesktopNav.delay,function(){$(this).removeClass("subnav-opened")})}},DesktopNav.delay)},destroy:function(){$("#sub-nav-container .over").removeClass("over");$(".nav-lvl-1 li").unbind("mouseenter mouseleave");$(".sub-nav-links > ul > li").unbind("mouseenter mouseleave");$(".sub-nav-links").unbind("mouseenter mouseleave");$(".subsub-nav-container").unbind("mouseenter mouseleave");$(".main-nav-body .nav-lvl-1").off("click","> li > a");$("#sub-nav-container").off("click",".sub-nav-links > ul > li > a")}};var ogHeaderHeight;ssm.addState({id:"mobile",query:"(max-width: 480px)",onEnter:function(){DesktopNav.destroy();MobileNav.init()}});ssm.addState({id:"tablet",query:"(min-width: 481px) and (max-width: 1023px)",onEnter:function(){DesktopNav.destroy();MobileNav.init()}});ssm.addState({id:"desktop",query:"(min-width: 1024px)",onEnter:function(){MobileNav.destroy();DesktopNav.init()}})})();slickProductImage($(".prod-images-group-select"));slickAdditionalViews();initZoom($(".prod-images-group-select .prod-images-itm:first-child img"));$(".product-video").fitVids()});$(function(){var initialContainer=$(".sub-nav-2 > ul.subsub-nav-links");$("#Bicycle-Accessories-subsubnav ul.subsub-nav-links").addClass("custom-breaks");$("#Bicycle-Accessories-subsubnav .cameras-link").addClass("last");$("#Bicycle-Accessories-subsubnav .nutrition-link").addClass("last");$("#Bicycle-Accessories-subsubnav .trainers-rollers-link").addClass("last");function updateColumns(items,og,parent){var column=0,columns=parent.children(),itemsPerColumn=(items.length/columns.length);if(!columns.hasClass("custom-breaks")){items.each(function(idx,el){if(idx!==0&&idx>itemsPerColumn*(column+1)){column+=1}columns.eq(column).append(el)})}else{items.each(function(idx,el){columns.eq(column).append(el);if($(el).hasClass("last")){column+=1}})}}function setupColumns(){initialContainer.each(function(){var columnItems=$(this).children(),columnParent=$(this).parent(),columnOriginal=$(this),column=1;columnItems.detach();while(column<=(columnOriginal.data("columns")-1)){columnParent.append(columnOriginal.clone());column++}updateColumns(columnItems,columnOriginal,columnParent)})}setupColumns()});var decodeEntities=(function(){var element=document.createElement("div");function decodeHTMLEntities(str){if(str&&typeof str==="string"){str=str.replace(/<script[^>]*>([\S\s]*?)<\/script>/gmi,"");str=str.replace(/<\/?\w(?:[^"'>]|"[^"]*"|'[^']*')*>/gmi,"");element.innerHTML=str;str=element.textContent;element.textContent=""}return str}return decodeHTMLEntities})();function ttReviewsTeaserFunc(ttClass,data){var className=ttClass||"TurnToReviewsTeaser";var iteasers=TurnTojQuery("."+className);var htmlCode="<div>"+(TurnToItemData.counts.ar>0?"":'<div><a class="TTwriteReview" href="javascript:void(0);">Be the first to write a review</a></div>');if(TurnToItemData.counts.ar>0){htmlCode+='<div class="TTratingLinks"><a class="TTwriteReview" href="javascript: void(0);">Write a Review</a> | <a class="TTreadReviews" href="javascript: void(0);">Read '+TurnToItemData.counts.r+" Review"+(TurnToItemData.counts.r==1?"":"s")+'</a></div><div class="TTclear"></div>'}htmlCode+"</div>";iteasers.html(htmlCode);iteasers.find(".TTreadReviews").click(function(){prodTabNode.select_frame("R")});iteasers.find(".TTwriteReview").click(function(){TurnTo.writeReview()})}function ttQATeaserFunc(ttClass,data){var htmlCode='<div class="qa-teaser-hdr"><div class="qa-teaser-summary">'+((data.counts.q>0)?'<a class="qa-teaser-link" href="javascript: void(0);">'+(data.counts.q+" Question"+(data.counts.q==1?"":"s")+" | "+data.counts.a+" Answer"+(data.counts.a==1?"":"s")+"<br />"+data.counts.c+" Comments")+"</a>":"0 Questions | 0 Answers")+'</div></div><div class="qa-teaser-wrapper"><input type="text" id="qa-input" placeholder="Type in your question. We\'ll search for answers" /></div>';$(".TurnToItemInputTeaser").html(htmlCode);$(".qa-teaser-summary").click(function(){prodTabNode.select_frame("Q")});$("#qa-input").keypress(function(k){if(k.which==13){k.preventDefault();prodTabNode.select_frame("Q");TurnTo.itemTeaserClick({fromInputTeaser:true,text:TurnTojQuery($(this)).val()})}})}function getDecimal(s){if(s==""){s="0"}return parseFloat(s.replace(",",""))}function formatAmt(a){return a.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")};