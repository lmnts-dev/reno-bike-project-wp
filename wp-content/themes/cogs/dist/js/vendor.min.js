"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function initSliders(){var t=document.querySelectorAll(".block-slider-el");0<t.length&&t.forEach(function(t){new Flickity(t,{cellAlign:"left",prevNextButtons:!1,fade:!0,wrapAround:!0,autoPlay:!0})});t=document.querySelectorAll(".collection-listings-slider-el");0<t.length&&t.forEach(function(t){new Flickity(t,{contain:!0,cellAlign:"left",prevNextButtons:!0,pageDots:!1,freeScroll:!0})});t=document.querySelectorAll(".featured-products-slider-el");0<t.length&&t.forEach(function(t){new Flickity(t,{cellAlign:"left",prevNextButtons:!0,pageDots:!1,wrapAround:!0,autoPlay:!0})});t=document.querySelectorAll(".featured-news-slider-el");0<t.length&&t.forEach(function(t){new Flickity(t,{cellAlign:"left",prevNextButtons:!1,fade:!0,wrapAround:!0,autoPlay:!0})})}function initLazyLoad(){new LazyLoad({elements_selector:".lazy"})}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).barba=e()}(void 0,function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function t(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function f(){return(f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,i=arguments[e];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function r(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e,n){return(a=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);i=new(Function.bind.apply(t,i));return n&&s(i,n.prototype),i}).apply(null,arguments)}function e(t){var n="function"==typeof Map?new Map:void 0;return(e=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return a(t,arguments,o(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),s(e,t)})(t)}function l(t,e){try{var n=t()}catch(t){return e(t)}return n&&n.then?n.then(void 0,e):n}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var u;(g=u=u||{})[g.off=0]="off",g[g.error=1]="error",g[g.warning=2]="warning",g[g.info=3]="info",g[g.debug=4]="debug";var n=u.off,d=function(){function i(t){this.t=t}i.getLevel=function(){return n},i.setLevel=function(t){return n=u[t]};var t=i.prototype;return t.error=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.i(console.error,u.error,e)},t.warn=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.i(console.warn,u.warning,e)},t.info=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.i(console.info,u.info,e)},t.debug=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.i(console.log,u.debug,e)},t.i=function(t,e,n){e<=i.getLevel()&&t.apply(console,["["+this.t+"] "].concat(n))},i}(),h=P,c=w,p=b,m=E,g=S,v="/",y=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function b(t,e){for(var n=[],i=0,r=0,o="",s=e&&e.delimiter||v,a=e&&e.whitelist||void 0,u=!1;null!==(f=y.exec(t));){var h,c,f,l,d=f[0],p=f[1],m=f.index;o+=t.slice(r,m),r=m+d.length,p?(o+=p[1],u=!0):(l="",h=f[2],c=f[3],m=f[4],d=f[5],!u&&o.length&&(f=o[p=o.length-1],(!a||-1<a.indexOf(f))&&(l=f,o=o.slice(0,p))),o&&(n.push(o),o="",u=!1),n.push({name:h||i++,prefix:l,delimiter:l=l||s,optional:"?"===d||"*"===d,repeat:"+"===d||"*"===d,pattern:(m=c||m)?m.replace(/([=!:$/()])/g,"\\$1"):"[^"+x(l===s?l:l+s)+"]+?"}))}return(o||r<t.length)&&n.push(o+t.substr(r)),n}function w(u,h){return function(t,e){var n=u.exec(t);if(!n)return!1;for(var i,r=n[0],t=n.index,o={},s=e&&e.decode||decodeURIComponent,a=1;a<n.length;a++)void 0!==n[a]&&(o[(i=h[a-1]).name]=i.repeat?n[a].split(i.delimiter).map(function(t){return s(t,i)}):s(n[a],i));return{path:r,index:t,params:o}}}function E(c,t){for(var f=new Array(c.length),e=0;e<c.length;e++)"object"==_typeof(c[e])&&(f[e]=new RegExp("^(?:"+c[e].pattern+")$",_(t)));return function(t,e){for(var n="",i=e&&e.encode||encodeURIComponent,r=!e||!1!==e.validate,o=0;o<c.length;o++){var s=c[o];if("string"!=typeof s){var a,u=t?t[s.name]:void 0;if(Array.isArray(u)){if(!s.repeat)throw new TypeError('Expected "'+s.name+'" to not repeat, but got array');if(0===u.length){if(s.optional)continue;throw new TypeError('Expected "'+s.name+'" to not be empty')}for(var h=0;h<u.length;h++){if(a=i(u[h],s),r&&!f[o].test(a))throw new TypeError('Expected all "'+s.name+'" to match "'+s.pattern+'"');n+=(0===h?s.prefix:s.delimiter)+a}}else if("string"!=typeof u&&"number"!=typeof u&&"boolean"!=typeof u){if(!s.optional)throw new TypeError('Expected "'+s.name+'" to be '+(s.repeat?"an array":"a string"))}else{if(a=i(String(u),s),r&&!f[o].test(a))throw new TypeError('Expected "'+s.name+'" to match "'+s.pattern+'", but got "'+a+'"');n+=s.prefix+a}}else n+=s}return n}}function x(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function _(t){return t&&t.sensitive?"":"i"}function S(t,e,n){for(var i=(n=n||{}).strict,r=!1!==n.start,o=!1!==n.end,s=n.delimiter||v,a=[].concat(n.endsWith||[]).map(x).concat("$").join("|"),u=r?"^":"",h=0;h<t.length;h++){var c,f=t[h];"string"==typeof f?u+=x(f):(c=f.repeat?"(?:"+f.pattern+")(?:"+x(f.delimiter)+"(?:"+f.pattern+"))*":f.pattern,e&&e.push(f),u+=f.optional?f.prefix?"(?:"+x(f.prefix)+"("+c+"))?":"("+c+")?":x(f.prefix)+"("+c+")")}return o?(i||(u+="(?:"+x(s)+")?"),u+="$"===a?"$":"(?="+a+")"):(o="string"==typeof(o=t[t.length-1])?o[o.length-1]===s:void 0===o,i||(u+="(?:"+x(s)+"(?="+a+"))?"),o||(u+="(?="+x(s)+"|"+a+")")),new RegExp(u,_(n))}function P(t,e,n){return t instanceof RegExp?function(t,e){if(!e)return t;var n=t.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)e.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return t}(t,e):Array.isArray(t)?function(t,e,n){for(var i=[],r=0;r<t.length;r++)i.push(P(t[r],e,n).source);return new RegExp("(?:"+i.join("|")+")",_(n))}(t,e,n):(e=e,S(b(t,n=n),e,n))}h.match=function(t,e){var n=[];return w(P(t,n,e),n)},h.regexpToFunction=c,h.parse=p,h.compile=function(t,e){return E(b(t,e),e)},h.tokensToFunction=m,h.tokensToRegExp=g;function T(t,i){try{var e=function(){if(!i.next.html)return Promise.resolve(t).then(function(t){var e,n=i.next;t&&(e=R.toElement(t),n.namespace=R.getNamespace(e),n.container=R.getContainer(e),n.html=t,k.update({ns:n.namespace}),t=R.toDocument(t),document.title=t.title)})}();return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(t){return Promise.reject(t)}}function z(){return window.location.origin}function L(t){return void 0===t&&(t=window.location.href),j(t).port}function O(t){return(t=void 0===t?window.location.href:t).replace(/(\/#.*|\/|#.*)$/,"")}var I={container:"container",history:"history",namespace:"namespace",prefix:"data-barba",prevent:"prevent",wrapper:"wrapper"},R=((g=B.prototype).toString=function(t){return t.outerHTML},g.toDocument=function(t){return this.u.parseFromString(t,"text/html")},g.toElement=function(t){var e=document.createElement("div");return e.innerHTML=t,e},g.getHtml=function(t){return void 0===t&&(t=document),this.toString(t.documentElement)},g.getWrapper=function(t){return(t=void 0===t?document:t).querySelector("["+this.o.prefix+'="'+this.o.wrapper+'"]')},g.getContainer=function(t){return(t=void 0===t?document:t).querySelector("["+this.o.prefix+'="'+this.o.container+'"]')},g.removeContainer=function(t){document.body.contains(t)&&t.parentNode.removeChild(t)},g.addContainer=function(t,e){var n=this.getContainer();n?this.s(t,n):e.appendChild(t)},g.getNamespace=function(t){t=(t=void 0===t?document:t).querySelector("["+this.o.prefix+"-"+this.o.namespace+"]");return t?t.getAttribute(this.o.prefix+"-"+this.o.namespace):null},g.getHref=function(t){if(t.tagName&&"a"===t.tagName.toLowerCase()){if("string"==typeof t.href)return t.href;t=t.getAttribute("href")||t.getAttribute("xlink:href");if(t)return this.resolveUrl(t.baseVal||t)}return null},g.resolveUrl=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e.length;if(0===i)throw new Error("resolveUrl requires at least one argument; got none.");var r=document.createElement("base");if(r.href=arguments[0],1===i)return r.href;var o=document.getElementsByTagName("head")[0];o.insertBefore(r,o.firstChild);for(var s,a=document.createElement("a"),u=1;u<i;u++)a.href=arguments[u],r.href=s=a.href;return o.removeChild(r),s},g.s=function(t,e){e.parentNode.insertBefore(t,e.nextSibling)},new B),k=((g=M.prototype).init=function(t,e){this.l="barba";e={ns:e,scroll:{x:window.scrollX,y:window.scrollY},url:t};this.h.push(e),this.v=0;e={from:this.l,index:0,states:[].concat(this.h)};window.history&&window.history.replaceState(e,"",t)},g.change=function(t,e,n){var i;return n&&n.state?(n=(i=n.state).index,e=this.m(this.v-n),this.replace(i.states),this.v=n):this.add(t,e),e},g.add=function(t,e){var n=this.size,i=this.p(e),e={ns:"tmp",scroll:{x:window.scrollX,y:window.scrollY},url:t};this.h.push(e),this.v=n;var r={from:this.l,index:n,states:[].concat(this.h)};switch(i){case"push":window.history&&window.history.pushState(r,"",t);break;case"replace":window.history&&window.history.replaceState(r,"",t)}},g.update=function(t,e){e=e||this.v,t=f({},this.get(e),{},t);this.set(e,t)},g.remove=function(t){t?this.h.splice(t,1):this.h.pop(),this.v--},g.clear=function(){this.h=[],this.v=-1},g.replace=function(t){this.h=t},g.get=function(t){return this.h[t]},g.set=function(t,e){return this.h[t]=e},g.p=function(t){var e="push",n=t,t=I.prefix+"-"+I.history;return e=n.hasAttribute&&n.hasAttribute(t)?n.getAttribute(t):e},g.m=function(t){return 1<Math.abs(t)?0<t?"forward":"back":0===t?"popstate":0<t?"back":"forward"},t(M,[{key:"current",get:function(){return this.h[this.v]}},{key:"state",get:function(){return this.h[this.h.length-1]}},{key:"previous",get:function(){return this.v<1?null:this.h[this.v-1]}},{key:"size",get:function(){return this.h.length}}]),new M),A=h,C={__proto__:null,update:T,nextTick:function(){return new Promise(function(t){window.requestAnimationFrame(t)})},pathToRegexp:A},j=function(t){var e,n=t.match(/:\d+/);null===n?(/^http/.test(t)&&(e=80),/^https/.test(t)&&(e=443)):(r=n[0].substring(1),e=parseInt(r,10));var i,n=t.replace(z(),""),r={},t=n.indexOf("#");0<=t&&(i=n.slice(t+1),n=n.slice(0,t));t=n.indexOf("?");return 0<=t&&(r=W(n.slice(t+1)),n=n.slice(0,t)),{hash:i,path:n,port:e,query:r}},W=function(t){return t.split("&").reduce(function(t,e){e=e.split("=");return t[e[0]]=e[1],t},{})},q={__proto__:null,getHref:function(){return window.location.href},getOrigin:z,getPort:L,getPath:function(t){return void 0===t&&(t=window.location.href),j(t).path},parse:j,parseQuery:W,clean:O};function M(){this.h=[],this.v=-1}function B(){this.o=I,this.u=new DOMParser}function H(r,o,s){return void 0===o&&(o=2e3),new Promise(function(e,n){var i=new XMLHttpRequest;i.onreadystatechange=function(){var t;i.readyState===XMLHttpRequest.DONE&&(200===i.status?e(i.responseText):i.status&&(t={status:i.status,statusText:i.statusText},s(r,t),n(t)))},i.ontimeout=function(){var t=new Error("Timeout error ["+o+"]");s(r,t),n(t)},i.onerror=function(){var t=new Error("Fetch error");s(r,t),n(t)},i.open("GET",r),i.timeout=o,i.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml"),i.setRequestHeader("x-barba","yes"),i.send()})}function N(s,a){return void 0===a&&(a={}),function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];var o=!1;return new Promise(function(n,i){a.async=function(){return o=!0,function(t,e){t?i(t):n(e)}};var t,e=s.apply(a,r);o||(!(t=e)||"object"!=_typeof(t)&&"function"!=typeof t||"function"!=typeof t.then?n(e):e.then(n,i))})}}function D(){return!window.history.pushState}function F(t){return!t.el||!t.href}function U(t){return 1<(t=t.event).which||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey}function Y(t){return(t=t.el).hasAttribute("target")&&"_blank"===t.target}function $(t){return void 0!==(t=t.el).protocol&&window.location.protocol!==t.protocol||void 0!==t.hostname&&window.location.hostname!==t.hostname}function Q(t){return void 0!==(t=t.el).port&&L()!==L(t.href)}function G(t){return(t=t.el).getAttribute&&"string"==typeof t.getAttribute("download")}function V(t){return t.el.hasAttribute(I.prefix+"-"+I.prevent)}function X(t){return Boolean(t.el.closest("["+I.prefix+"-"+I.prevent+'="all"]'))}function K(t){return t=t.href,O(t)===O()&&L(t)===L()}var Z,J=new(function(e){function t(){var t;return(t=e.call(this)||this).logger=new d("@barba/core"),t.all=["ready","page","reset","currentAdded","currentRemoved","nextAdded","nextRemoved","beforeOnce","once","afterOnce","before","beforeLeave","leave","afterLeave","beforeEnter","enter","afterEnter","after"],t.registered=new Map,t.init(),t}r(t,e);var n=t.prototype;return n.init=function(){var i=this;this.registered.clear(),this.all.forEach(function(n){i[n]||(i[n]=function(t,e){i.registered.has(n)||i.registered.set(n,new Set),i.registered.get(n).add({ctx:e||{},fn:t})})})},n.do=function(e){for(var n=this,t=arguments.length,i=new Array(1<t?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];if(this.registered.has(e)){var o=Promise.resolve();return this.registered.get(e).forEach(function(t){o=o.then(function(){return N(t.fn,t.ctx).apply(void 0,i)})}),o.catch(function(t){n.logger.debug("Hook error ["+e+"]"),n.logger.error(t)})}return Promise.resolve()},n.clear=function(){var e=this;this.all.forEach(function(t){delete e[t]}),this.init()},n.help=function(){this.logger.info("Available hooks: "+this.all.join(","));var n=[];this.registered.forEach(function(t,e){return n.push(e)}),this.logger.info("Registered hooks: "+n.join(","))},t}(function(){})),h=(ct.prototype.checkHref=function(t){if("boolean"==typeof this.g)return this.g;var e=j(t).path;return this.P.some(function(t){return null!==t.exec(e)})},ct),tt=function(e){function t(t){return(t=e.call(this,t)||this).k=new Map,t}r(t,e);var n=t.prototype;return n.set=function(t,e,n){return this.k.set(t,{action:n,request:e}),{action:n,request:e}},n.get=function(t){return this.k.get(t)},n.getRequest=function(t){return this.k.get(t).request},n.getAction=function(t){return this.k.get(t).action},n.has=function(t){return!this.checkHref(t)&&this.k.has(t)},n.delete=function(t){return this.k.delete(t)},n.update=function(t,e){e=f({},this.k.get(t),{},e);return this.k.set(t,e),e},t}(h),et=function(e){function t(t){return(t=e.call(this,t)||this).suite=[],t.tests=new Map,t.init(),t}r(t,e);var n=t.prototype;return n.init=function(){this.add("pushState",D),this.add("exists",F),this.add("newTab",U),this.add("blank",Y),this.add("corsDomain",$),this.add("corsPort",Q),this.add("download",G),this.add("preventSelf",V),this.add("preventAll",X),this.add("sameUrl",K,!1)},n.add=function(t,e,n){void 0===n&&(n=!0),this.tests.set(t,e),n&&this.suite.push(t)},n.run=function(t,e,n,i){return this.tests.get(t)({el:e,event:n,href:i})},n.checkLink=function(e,n,i){var r=this;return this.suite.some(function(t){return r.run(t,e,n,i)})},t}(h),nt=(r(ht,Z=e(Error)),ht),it=((h=ut.prototype).add=function(t,e){"rule"===t?this.A.splice(e.position||0,0,e.value):this.all.push(e),this.update()},h.resolve=function(r,t){var o=this,e=(e=(t=void 0===t?{}:t).once?this.once:this.page).filter(t.self?function(t){return t.name&&"self"===t.name}:function(t){return!t.name||"self"!==t.name}),s=new Map,n=e.find(function(e){var n=!0,i={};return!(!t.self||"self"!==e.name)||(o.A.reverse().forEach(function(t){n&&(n=o.R(e,t,r,i),e.from&&e.to&&(n=o.R(e,t,r,i,"from")&&o.R(e,t,r,i,"to")),e.from&&!e.to&&(n=o.R(e,t,r,i,"from")),!e.from&&e.to&&(n=o.R(e,t,r,i,"to")))}),s.set(e,i),n)}),i=s.get(n),a=[];return a.push(t.once?"once":"page"),t.self&&a.push("self"),i?(e=[n],0<Object.keys(i).length&&e.push(i),(i=this.logger).info.apply(i,["Transition found ["+a.join(",")+"]"].concat(e))):this.logger.info("No transition found ["+a.join(",")+"]"),n},h.update=function(){var e=this;this.all=this.all.map(function(t){return e.T(t)}).sort(function(t,e){return t.priority-e.priority}).reverse().map(function(t){return delete t.priority,t}),this.page=this.all.filter(function(t){return void 0!==t.leave||void 0!==t.enter}),this.once=this.all.filter(function(t){return void 0!==t.once})},h.R=function(t,e,n,i,r){var o=!0,s=!1,a=t,t=e.name,u=t,h=t,c=t,f=r?a[r]:a,l="to"===r?n.next:n.current;if((!r||f)&&f[t]){switch(e.type){case"strings":default:var d=Array.isArray(f[u])?f[u]:[f[u]];l[u]&&-1!==d.indexOf(l[u])&&(s=!0),-1===d.indexOf(l[u])&&(o=!1);break;case"object":d=Array.isArray(f[h])?f[h]:[f[h]];l[h]?(l[h].name&&-1!==d.indexOf(l[h].name)&&(s=!0),-1===d.indexOf(l[h].name)&&(o=!1)):o=!1;break;case"function":f[c](n)?s=!0:o=!1}s&&(r?(i[r]=i[r]||{},i[r][t]=a[r][t]):i[t]=a[t])}return o},h.O=function(t,e,n){var i=0;return(t[e]||t.from&&t.from[e]||t.to&&t.to[e])&&(i+=Math.pow(10,n),t.from&&t.from[e]&&(i+=1),t.to&&t.to[e]&&(i+=2)),i},h.T=function(n){var i=this,r=n.priority=0;return this.A.forEach(function(t,e){r+=i.O(n,t.name,e+1)}),n.priority=r,n},ut),rt=((h=at.prototype).get=function(t,e){return this.store.resolve(t,e)},h.doOnce=function(t){var e=t.data,n=t.transition;try{var i=function(){r.S=!1},r=this,o=n||{};r.S=!0;var s=l(function(){return Promise.resolve(r.j("beforeOnce",e,o)).then(function(){return Promise.resolve(r.once(e,o)).then(function(){return Promise.resolve(r.j("afterOnce",e,o)).then(function(){})})})},function(t){r.S=!1,r.logger.debug("Transition error [before/after/once]"),r.logger.error(t)});return Promise.resolve(s&&s.then?s.then(i):i())}catch(t){return Promise.reject(t)}},h.doPage=function(t){var i=t.data,e=t.transition,r=t.page,o=t.wrapper;try{var n=function(t){if(s)return t;a.S=!1},s=!1,a=this,u=e||{},h=!0===u.sync||!1;a.S=!0;var c=l(function(){function t(){return Promise.resolve(a.j("before",i,u)).then(function(){function t(t){return Promise.resolve(a.remove(i)).then(function(){return Promise.resolve(a.j("after",i,u)).then(function(){})})}var e=function(){if(h)return l(function(){return Promise.resolve(a.add(i,o)).then(function(){return Promise.resolve(a.j("beforeLeave",i,u)).then(function(){return Promise.resolve(a.j("beforeEnter",i,u)).then(function(){return Promise.resolve(Promise.all([a.leave(i,u),a.enter(i,u)])).then(function(){return Promise.resolve(a.j("afterLeave",i,u)).then(function(){return Promise.resolve(a.j("afterEnter",i,u)).then(function(){})})})})})})},function(t){if(a.M(t))throw new nt(t,"Transition error [sync]")});function t(t){return l(function(){var t=function(){if(!1!==e)return Promise.resolve(a.add(i,o)).then(function(){return Promise.resolve(a.j("beforeEnter",i,u)).then(function(){return Promise.resolve(a.enter(i,u,e)).then(function(){return Promise.resolve(a.j("afterEnter",i,u)).then(function(){})})})})}();if(t&&t.then)return t.then(function(){})},function(t){if(a.M(t))throw new nt(t,"Transition error [before/after/enter]")})}var e=!1,n=l(function(){return Promise.resolve(a.j("beforeLeave",i,u)).then(function(){return Promise.resolve(Promise.all([a.leave(i,u),T(r,i)]).then(function(t){return t[0]})).then(function(t){return e=t,Promise.resolve(a.j("afterLeave",i,u)).then(function(){})})})},function(t){if(a.M(t))throw new nt(t,"Transition error [before/after/leave]")});return n&&n.then?n.then(t):t()}();return e&&e.then?e.then(t):t()})}var e=function(){if(h)return Promise.resolve(T(r,i)).then(function(){})}();return e&&e.then?e.then(t):t()},function(t){if(a.S=!1,t.name&&"BarbaError"===t.name)throw a.logger.debug(t.label),a.logger.error(t.error),t;throw a.logger.debug("Transition error [page]"),a.logger.error(t),t});return Promise.resolve(c&&c.then?c.then(n):n(c))}catch(t){return Promise.reject(t)}},h.once=function(t,e){try{return Promise.resolve(J.do("once",t,e)).then(function(){return e.once?N(e.once,e)(t):Promise.resolve()})}catch(t){return Promise.reject(t)}},h.leave=function(t,e){try{return Promise.resolve(J.do("leave",t,e)).then(function(){return e.leave?N(e.leave,e)(t):Promise.resolve()})}catch(t){return Promise.reject(t)}},h.enter=function(t,e,n){try{return Promise.resolve(J.do("enter",t,e)).then(function(){return e.enter?N(e.enter,e)(t,n):Promise.resolve()})}catch(t){return Promise.reject(t)}},h.add=function(t,e){try{return R.addContainer(t.next.container,e),J.do("nextAdded",t),Promise.resolve()}catch(t){return Promise.reject(t)}},h.remove=function(t){try{return R.removeContainer(t.current.container),J.do("currentRemoved",t),Promise.resolve()}catch(t){return Promise.reject(t)}},h.M=function(t){return t.message?!/Timeout error|Fetch error/.test(t.message):!t.status},h.j=function(t,e,n){try{return Promise.resolve(J.do(t,e,n)).then(function(){return n[t]?N(n[t],n)(e):Promise.resolve()})}catch(t){return Promise.reject(t)}},t(at,[{key:"isRunning",get:function(){return this.S},set:function(t){this.S=t}},{key:"hasOnce",get:function(){return 0<this.store.once.length}},{key:"hasSelf",get:function(){return this.store.all.some(function(t){return"self"===t.name})}},{key:"shouldWait",get:function(){return this.store.all.some(function(t){return t.to&&!t.to.route||t.sync})}}]),at),ot=(st.prototype.L=function(n){var i=this;return function(t){var e=n.match(/enter/i)?t.next:t.current,e=i.byNamespace.get(e.namespace);return e&&e[n]?N(e[n],e)(t):Promise.resolve()}},st);function st(t){var e=this;this.names=["beforeLeave","afterLeave","beforeEnter","afterEnter"],this.byNamespace=new Map,0!==t.length&&(t.forEach(function(t){e.byNamespace.set(t.namespace,t)}),this.names.forEach(function(t){J[t](e.L(t))}))}function at(t){void 0===t&&(t=[]),this.logger=new d("@barba/core"),this.S=!1,this.store=new it(t)}function ut(t){void 0===t&&(t=[]),this.logger=new d("@barba/core"),this.all=[],this.page=[],this.once=[],this.A=[{name:"namespace",type:"strings"},{name:"custom",type:"function"}],t&&(this.all=this.all.concat(t)),this.update()}function ht(t,e){var n;void 0===e&&(e="Barba error");for(var i=arguments.length,r=new Array(2<i?i-2:0),o=2;o<i;o++)r[o-2]=arguments[o];return(n=Z.call.apply(Z,[this].concat(r))||this).error=t,n.label=e,Error.captureStackTrace&&Error.captureStackTrace(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n),ht),n.name="BarbaError",n}function ct(t){this.P=[],"boolean"==typeof t?this.g=t:(t=Array.isArray(t)?t:[t],this.P=t.map(function(t){return A(t)}))}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;do{if(e.matches(t))return e}while(null!==(e=e.parentElement||e.parentNode)&&1===e.nodeType);return null});var ft={container:null,html:"",namespace:"",url:{hash:"",href:"",path:"",port:null,query:{}}};return(h=lt.prototype).use=function(t,e){var n=this.plugins;-1<n.indexOf(t)?this.logger.warn("Plugin ["+t.name+"] already installed."):"function"==typeof t.install?(t.install(this,e),n.push(t)):this.logger.warn("Plugin ["+t.name+'] has no "install" method.')},h.init=function(t){var e=void 0===t?{}:t,n=e.transitions,i=void 0===n?[]:n,r=e.views,o=void 0===r?[]:r,s=e.schema,a=void 0===s?I:s,u=e.requestError,h=e.timeout,c=void 0===h?2e3:h,t=e.cacheIgnore,n=void 0!==t&&t,r=e.prefetchIgnore,s=void 0!==r&&r,h=e.preventRunning,t=void 0!==h&&h,r=e.prevent,h=void 0===r?null:r,r=e.debug,e=e.logLevel;if(d.setLevel(!0===(void 0!==r&&r)?"debug":void 0===e?"off":e),this.logger.info(this.version),Object.keys(a).forEach(function(t){I[t]&&(I[t]=a[t])}),this.$=u,this.timeout=c,this.cacheIgnore=n,this.prefetchIgnore=s,this.preventRunning=t,this._=this.dom.getWrapper(),!this._)throw new Error("[@barba/core] No Barba wrapper found");this._.setAttribute("aria-live","polite"),this.q();t=this.data.current;if(!t.container)throw new Error("[@barba/core] No Barba container found");if(this.cache=new tt(n),this.prevent=new et(s),this.transitions=new rt(i),this.views=new ot(o),null!==h){if("function"!=typeof h)throw new Error("[@barba/core] Prevent should be a function");this.prevent.add("preventCustom",h)}this.history.init(t.url.href,t.namespace),this.B=this.B.bind(this),this.U=this.U.bind(this),this.D=this.D.bind(this),this.F(),this.plugins.forEach(function(t){return t.init()});t=this.data;t.trigger="barba",t.next=t.current,t.current=f({},this.schemaPage),this.hooks.do("ready",t),this.once(t),this.q()},h.destroy=function(){this.q(),this.H(),this.history.clear(),this.hooks.clear(),this.plugins=[]},h.force=function(t){window.location.assign(t)},h.go=function(t,e,n){var i;if(void 0===e&&(e="barba"),this.transitions.isRunning)this.force(t);else if(!(i="popstate"===e?this.history.current&&this.url.getPath(this.history.current.url)===this.url.getPath(t):this.prevent.run("sameUrl",null,null,t))||this.transitions.hasSelf)return e=this.history.change(t,e,n),n&&(n.stopPropagation(),n.preventDefault()),this.page(t,e,i)},h.once=function(n){try{var i=this;return Promise.resolve(i.hooks.do("beforeEnter",n)).then(function(){function t(){return Promise.resolve(i.hooks.do("afterEnter",n)).then(function(){})}var e=function(){if(i.transitions.hasOnce){var t=i.transitions.get(n,{once:!0});return Promise.resolve(i.transitions.doOnce({transition:t,data:n})).then(function(){})}}();return e&&e.then?e.then(t):t()})}catch(n){return Promise.reject(n)}},h.page=function(t,e,n){try{var i=function(){var e=r.data;return Promise.resolve(r.hooks.do("page",e)).then(function(){var t=l(function(){var t=r.transitions.get(e,{once:!1,self:n});return Promise.resolve(r.transitions.doPage({data:e,page:o,transition:t,wrapper:r._})).then(function(){r.q()})},function(){0===d.getLevel()&&r.force(e.current.url.href)});if(t&&t.then)return t.then(function(){})})},r=this;r.data.next.url=f({href:t},r.url.parse(t)),r.data.trigger=e;var o=(r.cache.has(t)?r.cache.update(t,{action:"click"}):r.cache.set(t,r.request(t,r.timeout,r.onRequestError.bind(r,e)),"click")).request,s=function(){if(r.transitions.shouldWait)return Promise.resolve(T(o,r.data)).then(function(){})}();return Promise.resolve(s&&s.then?s.then(i):i())}catch(t){return Promise.reject(t)}},h.onRequestError=function(t){this.transitions.isRunning=!1;for(var e=arguments.length,n=new Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=n[0],o=n[1],s=this.cache.getAction(r);return this.cache.delete(r),!(this.$&&!1===this.$(t,s,r,o)||("click"===s&&this.force(r),1))},h.prefetch=function(t){var e=this;this.cache.has(t)||this.cache.set(t,this.request(t,this.timeout,this.onRequestError.bind(this,"barba")).catch(function(t){e.logger.error(t)}),"prefetch")},h.F=function(){!0!==this.prefetchIgnore&&(document.addEventListener("mouseover",this.B),document.addEventListener("touchstart",this.B)),document.addEventListener("click",this.U),window.addEventListener("popstate",this.D)},h.H=function(){!0!==this.prefetchIgnore&&(document.removeEventListener("mouseover",this.B),document.removeEventListener("touchstart",this.B)),document.removeEventListener("click",this.U),window.removeEventListener("popstate",this.D)},h.B=function(t){var e=this,n=this.I(t);n&&(t=this.dom.getHref(n),this.prevent.checkHref(t)||this.cache.has(t)||this.cache.set(t,this.request(t,this.timeout,this.onRequestError.bind(this,n)).catch(function(t){e.logger.error(t)}),"enter"))},h.U=function(t){var e=this.I(t);if(e)return this.transitions.isRunning&&this.preventRunning?(t.preventDefault(),void t.stopPropagation()):void this.go(this.dom.getHref(e),e,t)},h.D=function(t){this.go(this.url.getHref(),"popstate",t)},h.I=function(t){for(var e=t.target;e&&!this.dom.getHref(e);)e=e.parentNode;if(e&&!this.prevent.checkLink(e,t,this.dom.getHref(e)))return e},h.q=function(){var t=this.url.getHref(),t={container:this.dom.getContainer(),html:this.dom.getHtml(),namespace:this.dom.getNamespace(),url:f({href:t},this.url.parse(t))};this.C={current:t,next:f({},this.schemaPage),trigger:void 0},this.hooks.do("reset",this.data)},t(lt,[{key:"data",get:function(){return this.C}},{key:"wrapper",get:function(){return this._}}]),new lt;function lt(){this.version="2.9.7",this.schemaPage=ft,this.Logger=d,this.logger=new d("@barba/core"),this.plugins=[],this.hooks=J,this.dom=R,this.helpers=C,this.history=k,this.request=H,this.url=q}}),barba.init({prevent:function(t){t=t.el;return t.classList&&t.classList.contains("barba-prevent")},transitions:[{leave:function(t){t.current,t.next,t.trigger},beforeEnter:function(t){t.current,t.next,t.trigger;window.scrollTo(0,0),initLazyLoad(),initGoogleAPIMaps(),initMasonry(),initBikeWheel(),initSliders(),initSocialOverlay(),initVideoOverlay()}}]}),barba.hooks.after(function(){ga("set","page",window.location.pathname),ga("send","pageview")}),initSliders(),initLazyLoad(),function(e,n){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(t){return n(e,t)}):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=n(e,require("jquery")):e.jQueryBridget=n(e,e.jQuery)}(window,function(t,e){function n(u,h,c){(c=c||e||t.jQuery)&&(h.prototype.option||(h.prototype.option=function(t){c.isPlainObject(t)&&(this.options=c.extend(!0,this.options,t))}),c.fn[u]=function(t){if("string"!=typeof t)return a=t,this.each(function(t,e){var n=c.data(e,u);n?(n.option(a),n._init()):(n=new h(e,a),c.data(e,u,n))}),this;var i,r,o,s,a,e=f.call(arguments,1);return r=e,s="$()."+u+'("'+(i=t)+'")',(t=this).each(function(t,e){var n=c.data(e,u);n?(e=n[i])&&"_"!=i.charAt(0)?(n=e.apply(n,r),o=void 0===o?n:o):l(s+" is not a valid method"):l(u+" not initialized. Cannot call methods, i.e. "+s)}),void 0!==o?o:t},i(c))}function i(t){!t||t&&t.bridget||(t.bridget=n)}var f=Array.prototype.slice,r=t.console,l=void 0===r?function(){}:function(t){r.error(t)};return i(e||t.jQuery),n}),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:void 0,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var n=this._events=this._events||{},t=n[t]=n[t]||[];return-1==t.indexOf(e)&&t.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var n=this._onceEvents=this._onceEvents||{};return(n[t]=n[t]||{})[e]=!0,this}},e.off=function(t,e){t=this._events&&this._events[t];if(t&&t.length){e=t.indexOf(e);return-1!=e&&t.splice(e,1),this}},e.emitEvent=function(t,e){var n=this._events&&this._events[t];if(n&&n.length){n=n.slice(0),e=e||[];for(var i=this._onceEvents&&this._onceEvents[t],r=0;r<n.length;r++){var o=n[r];i&&i[o]&&(this.off(t,o),delete i[o]),o.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t}),function(t,e){"function"==typeof define&&define.amd?define("get-size/get-size",e):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e():t.getSize=e()}(window,function(){function d(t){var e=parseFloat(t);return-1==t.indexOf("%")&&!isNaN(e)&&e}function p(t){t=getComputedStyle(t);return t||e("Style returned "+t+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),t}function m(t){if(b||(b=!0,(l=document.createElement("div")).style.width="200px",l.style.padding="1px 2px 3px 4px",l.style.borderStyle="solid",l.style.borderWidth="1px 2px 3px 4px",l.style.boxSizing="border-box",(f=document.body||document.documentElement).appendChild(l),c=p(l),g=200==Math.round(d(c.width)),m.isBoxSizeOuter=g,f.removeChild(l)),(t="string"==typeof t?document.querySelector(t):t)&&"object"==_typeof(t)&&t.nodeType){var e=p(t);if("none"==e.display)return function(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;e<y;e++)t[v[e]]=0;return t}();var n={};n.width=t.offsetWidth,n.height=t.offsetHeight;for(var i=n.isBorderBox="border-box"==e.boxSizing,r=0;r<y;r++){var o=v[r],s=e[o],s=parseFloat(s);n[o]=isNaN(s)?0:s}var a=n.paddingLeft+n.paddingRight,u=n.paddingTop+n.paddingBottom,h=n.marginLeft+n.marginRight,c=n.marginTop+n.marginBottom,f=n.borderLeftWidth+n.borderRightWidth,l=n.borderTopWidth+n.borderBottomWidth,t=i&&g,i=d(e.width);!1!==i&&(n.width=i+(t?0:a+f));i=d(e.height);return!1!==i&&(n.height=i+(t?0:u+l)),n.innerWidth=n.width-(a+f),n.innerHeight=n.height-(u+l),n.outerWidth=n.width+h,n.outerHeight=n.height+c,n}var l,f,c}var g,e="undefined"==typeof console?function(){}:function(t){console.error(t)},v=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],y=v.length,b=!1;return m}),function(t,e){"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e():t.matchesSelector=e()}(window,function(){var n=function(){var t=window.Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],n=0;n<e.length;n++){var i=e[n]+"MatchesSelector";if(t[i])return i}}();return function(t,e){return t[n](e)}}),function(e,n){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(t){return n(e,t)}):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=n(e,require("desandro-matches-selector")):e.fizzyUIUtils=n(e,e.matchesSelector)}(window,function(n,o){var u={extend:function(t,e){for(var n in e)t[n]=e[n];return t},modulo:function(t,e){return(t%e+e)%e}},e=Array.prototype.slice;u.makeArray=function(t){return Array.isArray(t)?t:null==t?[]:"object"==_typeof(t)&&"number"==typeof t.length?e.call(t):[t]},u.removeFrom=function(t,e){e=t.indexOf(e);-1!=e&&t.splice(e,1)},u.getParent=function(t,e){for(;t.parentNode&&t!=document.body;)if(t=t.parentNode,o(t,e))return t},u.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},u.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},u.filterFindElements=function(t,i){t=u.makeArray(t);var r=[];return t.forEach(function(t){if(t instanceof HTMLElement)if(i){o(t,i)&&r.push(t);for(var e=t.querySelectorAll(i),n=0;n<e.length;n++)r.push(e[n])}else r.push(t)}),r},u.debounceMethod=function(t,e,i){i=i||100;var r=t.prototype[e],o=e+"Timeout";t.prototype[e]=function(){var t=this[o];clearTimeout(t);var e=arguments,n=this;this[o]=setTimeout(function(){r.apply(n,e),delete n[o]},i)}},u.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},u.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,n){return e+"-"+n}).toLowerCase()};var h=n.console;return u.htmlInit=function(s,a){u.docReady(function(){var t=u.toDashed(a),i="data-"+t,e=document.querySelectorAll("["+i+"]"),t=document.querySelectorAll(".js-"+t),t=u.makeArray(e).concat(u.makeArray(t)),r=i+"-options",o=n.jQuery;t.forEach(function(e){var t=e.getAttribute(i)||e.getAttribute(r);try{n=t&&JSON.parse(t)}catch(t){return void(h&&h.error("Error parsing "+i+" on "+e.className+": "+t))}var n=new s(e,n);o&&o.data(e,a,n)})})},u}),function(t,e){"function"==typeof define&&define.amd?define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],e):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e(require("ev-emitter"),require("get-size")):(t.Outlayer={},t.Outlayer.Item=e(t.EvEmitter,t.getSize))}(window,function(t,e){function n(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}var i=document.documentElement.style,r="string"==typeof i.transition?"transition":"WebkitTransition",o="string"==typeof i.transform?"transform":"WebkitTransform",s={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[r],a={transform:o,transition:r,transitionDuration:r+"Duration",transitionProperty:r+"Property",transitionDelay:r+"Delay"},t=n.prototype=Object.create(t.prototype);t.constructor=n,t._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},t.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},t.getSize=function(){this.size=e(this.element)},t.css=function(t){var e,n=this.element.style;for(e in t)n[a[e]||e]=t[e]},t.getPosition=function(){var t=getComputedStyle(this.element),e=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop"),i=t[e?"left":"right"],r=t[n?"top":"bottom"],o=parseFloat(i),s=parseFloat(r),t=this.layout.size;-1!=i.indexOf("%")&&(o=o/100*t.width),-1!=r.indexOf("%")&&(s=s/100*t.height),o=isNaN(o)?0:o,s=isNaN(s)?0:s,o-=e?t.paddingLeft:t.paddingRight,s-=n?t.paddingTop:t.paddingBottom,this.position.x=o,this.position.y=s},t.layoutPosition=function(){var t=this.layout.size,e={},n=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop"),r=n?"right":"left",o=this.position.x+t[n?"paddingLeft":"paddingRight"];e[n?"left":"right"]=this.getXValue(o),e[r]="";r=i?"bottom":"top",t=this.position.y+t[i?"paddingTop":"paddingBottom"];e[i?"top":"bottom"]=this.getYValue(t),e[r]="",this.css(e),this.emitEvent("layout",[this])},t.getXValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!e?t/this.layout.size.width*100+"%":t+"px"},t.getYValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&e?t/this.layout.size.height*100+"%":t+"px"},t._transitionTo=function(t,e){this.getPosition();var n=this.position.x,i=this.position.y,r=t==this.position.x&&e==this.position.y;this.setPosition(t,e),!r||this.isTransitioning?((r={}).transform=this.getTranslate(t-n,e-i),this.transition({to:r,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})):this.layoutPosition()},t.getTranslate=function(t,e){return"translate3d("+(t=this.layout._getOption("originLeft")?t:-t)+"px, "+(e=this.layout._getOption("originTop")?e:-e)+"px, 0)"},t.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},t.moveTo=t._transitionTo,t.setPosition=function(t,e){this.position.x=parseFloat(t),this.position.y=parseFloat(e)},t._nonTransition=function(t){for(var e in this.css(t.to),t.isCleaning&&this._removeStyles(t.to),t.onTransitionEnd)t.onTransitionEnd[e].call(this)},t.transition=function(t){if(parseFloat(this.layout.options.transitionDuration)){var e,n=this._transn;for(e in t.onTransitionEnd)n.onEnd[e]=t.onTransitionEnd[e];for(e in t.to)n.ingProperties[e]=!0,t.isCleaning&&(n.clean[e]=!0);t.from&&(this.css(t.from),this.element.offsetHeight,0),this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0}else this._nonTransition(t)};var u="opacity,"+o.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()});t.enableTransition=function(){var t;this.isTransitioning||(t="number"==typeof(t=this.layout.options.transitionDuration)?t+"ms":t,this.css({transitionProperty:u,transitionDuration:t,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(s,this,!1))},t.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},t.onotransitionend=function(t){this.ontransitionend(t)};var h={"-webkit-transform":"transform"};t.ontransitionend=function(t){var e,n;t.target===this.element&&(e=this._transn,n=h[t.propertyName]||t.propertyName,delete e.ingProperties[n],function(t){for(var e in t)return;return 1}(e.ingProperties)&&this.disableTransition(),n in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[n]),n in e.onEnd&&(e.onEnd[n].call(this),delete e.onEnd[n]),this.emitEvent("transitionEnd",[this]))},t.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(s,this,!1),this.isTransitioning=!1},t._removeStyles=function(t){var e,n={};for(e in t)n[e]="";this.css(n)};var c={transitionProperty:"",transitionDuration:"",transitionDelay:""};return t.removeTransitionStyles=function(){this.css(c)},t.stagger=function(t){t=isNaN(t)?0:t,this.staggerDelay=t+"ms"},t.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},t.remove=function(){return r&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),void this.hide()):void this.removeElem()},t.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0,onTransitionEnd:e})},t.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},t.getHideRevealTransitionEndProperty=function(t){var e,t=this.layout.options[t];if(t.opacity)return"opacity";for(e in t)return e},t.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:e})},t.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},t.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},n}),function(r,o){"function"==typeof define&&define.amd?define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(t,e,n,i){return o(r,t,e,n,i)}):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=o(r,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):r.Outlayer=o(r,r.EvEmitter,r.getSize,r.fizzyUIUtils,r.Outlayer.Item)}(window,function(t,e,r,i,o){function s(t,e){var n=i.getQueryElement(t);n?(this.element=n,h&&(this.$element=h(this.element)),this.options=i.extend({},this.constructor.defaults),this.option(e),e=++c,this.element.outlayerGUID=e,(f[e]=this)._create(),this._getOption("initLayout")&&this.layout()):u&&u.error("Bad element for "+this.constructor.namespace+": "+(n||t))}function a(t){function e(){t.apply(this,arguments)}return(e.prototype=Object.create(t.prototype)).constructor=e}function n(){}var u=t.console,h=t.jQuery,c=0,f={};s.namespace="outlayer",s.Item=o,s.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var l=s.prototype;i.extend(l,e.prototype),l.option=function(t){i.extend(this.options,t)},l._getOption=function(t){var e=this.constructor.compatOptions[t];return e&&void 0!==this.options[e]?this.options[e]:this.options[t]},s.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},l._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),i.extend(this.element.style,this.options.containerStyle),this._getOption("resize")&&this.bindResize()},l.reloadItems=function(){this.items=this._itemize(this.element.children)},l._itemize=function(t){for(var e=this._filterFindItemElements(t),n=this.constructor.Item,i=[],r=0;r<e.length;r++){var o=new n(e[r],this);i.push(o)}return i},l._filterFindItemElements=function(t){return i.filterFindElements(t,this.options.itemSelector)},l.getItemElements=function(){return this.items.map(function(t){return t.element})},l.layout=function(){this._resetLayout(),this._manageStamps();var t=this._getOption("layoutInstant"),t=void 0!==t?t:!this._isLayoutInited;this.layoutItems(this.items,t),this._isLayoutInited=!0},l._init=l.layout,l._resetLayout=function(){this.getSize()},l.getSize=function(){this.size=r(this.element)},l._getMeasurement=function(t,e){var n,i=this.options[t];i?("string"==typeof i?n=this.element.querySelector(i):i instanceof HTMLElement&&(n=i),this[t]=n?r(n)[e]:i):this[t]=0},l.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},l._getItemsForLayout=function(t){return t.filter(function(t){return!t.isIgnored})},l._layoutItems=function(t,n){var i;this._emitCompleteOnItems("layout",t),t&&t.length&&(i=[],t.forEach(function(t){var e=this._getItemLayoutPosition(t);e.item=t,e.isInstant=n||t.isLayoutInstant,i.push(e)},this),this._processLayoutQueue(i))},l._getItemLayoutPosition=function(){return{x:0,y:0}},l._processLayoutQueue=function(t){this.updateStagger(),t.forEach(function(t,e){this._positionItem(t.item,t.x,t.y,t.isInstant,e)},this)},l.updateStagger=function(){var t=this.options.stagger;return null==t?void(this.stagger=0):(this.stagger=function(t){if("number"==typeof t)return t;var t=(e=t.match(/(^\d*\.?\d*)(\w*)/))&&e[1],e=e&&e[2];return t.length?(t=parseFloat(t))*(d[e]||1):0}(t),this.stagger)},l._positionItem=function(t,e,n,i,r){i?t.goTo(e,n):(t.stagger(r*this.stagger),t.moveTo(e,n))},l._postLayout=function(){this.resizeContainer()},l.resizeContainer=function(){var t;!this._getOption("resizeContainer")||(t=this._getContainerSize())&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))},l._getContainerSize=n,l._setContainerMeasure=function(t,e){var n;void 0!==t&&((n=this.size).isBorderBox&&(t+=e?n.paddingLeft+n.paddingRight+n.borderLeftWidth+n.borderRightWidth:n.paddingBottom+n.paddingTop+n.borderTopWidth+n.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px")},l._emitCompleteOnItems=function(e,t){function n(){o.dispatchEvent(e+"Complete",null,[t])}function i(){++r==s&&n()}var r,o=this,s=t.length;t&&s?(r=0,t.forEach(function(t){t.once(e,i)})):n()},l.dispatchEvent=function(t,e,n){var i=e?[e].concat(n):n;this.emitEvent(t,i),h&&(this.$element=this.$element||h(this.element),e?((e=h.Event(e)).type=t,this.$element.trigger(e,n)):this.$element.trigger(t,n))},l.ignore=function(t){t=this.getItem(t);t&&(t.isIgnored=!0)},l.unignore=function(t){t=this.getItem(t);t&&delete t.isIgnored},l.stamp=function(t){(t=this._find(t))&&(this.stamps=this.stamps.concat(t),t.forEach(this.ignore,this))},l.unstamp=function(t){(t=this._find(t))&&t.forEach(function(t){i.removeFrom(this.stamps,t),this.unignore(t)},this)},l._find=function(t){return t?("string"==typeof t&&(t=this.element.querySelectorAll(t)),i.makeArray(t)):void 0},l._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},l._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},l._manageStamp=n,l._getElementOffset=function(t){var e=t.getBoundingClientRect(),n=this._boundingRect,t=r(t);return{left:e.left-n.left-t.marginLeft,top:e.top-n.top-t.marginTop,right:n.right-e.right-t.marginRight,bottom:n.bottom-e.bottom-t.marginBottom}},l.handleEvent=i.handleEvent,l.bindResize=function(){t.addEventListener("resize",this),this.isResizeBound=!0},l.unbindResize=function(){t.removeEventListener("resize",this),this.isResizeBound=!1},l.onresize=function(){this.resize()},i.debounceMethod(s,"onresize",100),l.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},l.needsResizeLayout=function(){var t=r(this.element);return this.size&&t&&t.innerWidth!==this.size.innerWidth},l.addItems=function(t){t=this._itemize(t);return t.length&&(this.items=this.items.concat(t)),t},l.appended=function(t){t=this.addItems(t);t.length&&(this.layoutItems(t,!0),this.reveal(t))},l.prepended=function(t){var e=this._itemize(t);e.length&&(t=this.items.slice(0),this.items=e.concat(t),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(t))},l.reveal=function(t){var n;this._emitCompleteOnItems("reveal",t),t&&t.length&&(n=this.updateStagger(),t.forEach(function(t,e){t.stagger(e*n),t.reveal()}))},l.hide=function(t){var n;this._emitCompleteOnItems("hide",t),t&&t.length&&(n=this.updateStagger(),t.forEach(function(t,e){t.stagger(e*n),t.hide()}))},l.revealItemElements=function(t){t=this.getItems(t);this.reveal(t)},l.hideItemElements=function(t){t=this.getItems(t);this.hide(t)},l.getItem=function(t){for(var e=0;e<this.items.length;e++){var n=this.items[e];if(n.element==t)return n}},l.getItems=function(t){t=i.makeArray(t);var e=[];return t.forEach(function(t){t=this.getItem(t);t&&e.push(t)},this),e},l.remove=function(t){t=this.getItems(t);this._emitCompleteOnItems("remove",t),t&&t.length&&t.forEach(function(t){t.remove(),i.removeFrom(this.items,t)},this)},l.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="",this.items.forEach(function(t){t.destroy()}),this.unbindResize();t=this.element.outlayerGUID;delete f[t],delete this.element.outlayerGUID,h&&h.removeData(this.element,this.constructor.namespace)},s.data=function(t){t=(t=i.getQueryElement(t))&&t.outlayerGUID;return t&&f[t]},s.create=function(t,e){var n=a(s);return n.defaults=i.extend({},s.defaults),i.extend(n.defaults,e),n.compatOptions=i.extend({},s.compatOptions),n.namespace=t,n.data=s.data,n.Item=a(o),i.htmlInit(n,t),h&&h.bridget&&h.bridget(t,n),n};var d={ms:1,s:1e3};return s.Item=o,s}),function(t,e){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],e):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e(require("outlayer"),require("get-size")):t.Masonry=e(t.Outlayer,t.getSize)}(window,function(t,a){var e=t.create("masonry");e.compatOptions.fitWidth="isFitWidth";t=e.prototype;return t._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var t=0;t<this.cols;t++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},t.measureColumns=function(){this.getContainerWidth(),this.columnWidth||(n=(e=this.items[0])&&e.element,this.columnWidth=n&&a(n).outerWidth||this.containerWidth);var t=this.columnWidth+=this.gutter,e=this.containerWidth+this.gutter,n=e/t,t=t-e%t,n=Math[t&&t<1?"round":"floor"](n);this.cols=Math.max(n,1)},t.getContainerWidth=function(){var t=this._getOption("fitWidth")?this.element.parentNode:this.element,t=a(t);this.containerWidth=t&&t.innerWidth},t._getItemLayoutPosition=function(t){t.getSize();for(var e=t.size.outerWidth%this.columnWidth,n=Math[e&&e<1?"round":"ceil"](t.size.outerWidth/this.columnWidth),n=Math.min(n,this.cols),i=this[this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition"](n,t),e={x:this.columnWidth*i.col,y:i.y},r=i.y+t.size.outerHeight,o=n+i.col,s=i.col;s<o;s++)this.colYs[s]=r;return e},t._getTopColPosition=function(t){var e=this._getTopColGroup(t),t=Math.min.apply(Math,e);return{col:e.indexOf(t),y:t}},t._getTopColGroup=function(t){if(t<2)return this.colYs;for(var e=[],n=this.cols+1-t,i=0;i<n;i++)e[i]=this._getColGroupY(i,t);return e},t._getColGroupY=function(t,e){if(e<2)return this.colYs[t];e=this.colYs.slice(t,t+e);return Math.max.apply(Math,e)},t._getHorizontalColPosition=function(t,e){var n=this.horizontalColIndex%this.cols,n=1<t&&n+t>this.cols?0:n,e=e.size.outerWidth&&e.size.outerHeight;return this.horizontalColIndex=e?n+t:this.horizontalColIndex,{col:n,y:this._getColGroupY(n,t)}},t._manageStamp=function(t){var e=a(t),n=this._getElementOffset(t),i=this._getOption("originLeft")?n.left:n.right,t=i+e.outerWidth,i=Math.floor(i/this.columnWidth),i=Math.max(0,i),r=Math.floor(t/this.columnWidth);r-=t%this.columnWidth?0:1;for(var r=Math.min(this.cols-1,r),o=(this._getOption("originTop")?n.top:n.bottom)+e.outerHeight,s=i;s<=r;s++)this.colYs[s]=Math.max(o,this.colYs[s])},t._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this._getOption("fitWidth")&&(t.width=this._getContainerFitWidth()),t},t._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},t.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!=this.containerWidth},e});