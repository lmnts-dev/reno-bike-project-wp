function getParameterByName(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),o=i.exec(t);return o?o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):"":null}function check_params(){var e=getParameterByName("s");"undefined"!=typeof e&&(el.html.hasClass("is-mobile-tablet")?($.fn.fullpage.setScrollingSpeed(10),"office"==e?$.fn.fullpage.moveTo(1,1):"people"==e?$.fn.fullpage.moveTo(1,2):"contact"==e&&$.fn.fullpage.moveTo(1,3),setTimeout(function(){$.fn.fullpage.setScrollingSpeed(700)},500)):($.fn.fullpage.setScrollingSpeed(10),"office"==e?$.fn.fullpage.moveTo(2):"people"==e?$.fn.fullpage.moveTo(3):"contact"==e&&$.fn.fullpage.moveTo(4),setTimeout(function(){$.fn.fullpage.setScrollingSpeed(700)},500)))}function init_fullpage(){function e(){var e=$(".project-header"),t=$("#back-to-top");Math.abs(this.y)-170>=el.window.height()?(e.addClass("trigger-entrance"),t.addClass("active"),$("#intro-video").length&&$("#intro-video").get(0).pause()):(e.removeClass("trigger-entrance"),t.removeClass("active"),$("#intro-video").length&&$("#intro-video").get(0).play())}if(el.html.hasClass("is-mobile-tablet"))var t="panel-section-inner",i=!0,o=!1,a=1200;else var t="none",i=!1,o=!0,l=!1,a=0;var n=$(window).height();$(".main section").fullpage({sectionSelector:".panel-section",slideSelector:".panel-slide",scrollOverflow:!0,normalScrollElements:"#navigation",responsiveHeight:a,scrollOverflowOptions:{disablePointer:o,useTransition:i,useTransform:i,probeType:3},resize:!0,css3:i,easingcss3:"cubic-bezier(0.860, 0.000, 0.070, 1.000)",loopHorizontal:!1,onSlideLeave:function(e,t,i,o,a){var l=$(".panel-slide").eq(a),n=l.data("theme"),s=l.attr("data-panel-title");el.body.attr("data-theme",n),$back_to_top=$("#back-to-top"),el.header_section_placeholder.html(s);var d=$(".panel-section-inner").eq(a).scrollTop();setTimeout(function(){d>250?$("#back-to-top").addClass("active"):$("#back-to-top").removeClass("active")},500)},onLeave:function(e,t,i){var o=$(".panel-section").eq(t-1),a=o.data("theme"),l=o.attr("data-panel-title");el.body.attr("data-theme",a),$back_to_top=$("#back-to-top"),el.header_section_placeholder.html(l),el.html.hasClass("is-mobile-tablet")||(t>1?$back_to_top.addClass("active"):$back_to_top.removeClass("active"))},afterRender:function(){if(el.html.hasClass("is-mobile-tablet")&&!$("#project-content").length)var t=$(".panel-slide.active");else var t=$(".panel-section.fp-completely");var i=t.attr("data-panel-title");el.header_section_placeholder.html(i),$("#project-content").length?el.body.addClass("viewing-project"):el.body.removeClass("viewing-project");var o=$(".project-panel").find(".fp-scrollable").data("iscrollInstance");o&&void 0!==typeof o&&o.on("scroll",e),el.html.hasClass("is-mobile-tablet")&&$(".video-parallax-effect").click(function(e){return e.target!=this?!1:($(".intro-video-wrapper").hasClass("is-playing")?document.getElementById("intro-video").pause():document.getElementById("intro-video").play(),el.html.hasClass("is-tablet")&&$(".intro-video-wrapper").toggleClass("is-playing"),void(el.html.hasClass("is-tablet")||document.getElementById("intro-video").play()))})}})}function init_home(){if($(".mobile-project-list").length&&$(window).on("gestureend",function(e){e.originalEvent.scale>1?($.fn.fullpage.setAllowScrolling(!1),setTimeout(function(){$(".panel-slide.active input").focus(),$(".panel-slide.active p").trigger("click")},250)):setTimeout(function(){$.fn.fullpage.setAllowScrolling(!0)},250)}),el.html.hasClass("is-mobile-tablet")){var e=$("#back-to-top");if($(".team img").click(function(){$(this).hide().siblings("img").show()}),$(".panel-section-inner").each(function(){$(this).scroll(function(){$(this).scrollTop()>250?e.addClass("active"):e.removeClass("active")})}),$("#project-content").length&&el.html.hasClass("is-tablet")){var t=$(".project-header");$(".project-panel .panel-section-inner").scroll(function(){$(this).scrollTop()-170>=el.window.height()?t.addClass("trigger-entrance"):t.removeClass("trigger-entrance")})}}$("#back-to-top").click(function(){if(el.html.hasClass("is-mobile-tablet")){if($("#about").length)var e=$(".panel-section .active .panel-section-inner");else var e=$(".panel-section.active .panel-section-inner");e.animate({scrollTop:0},300)}else if($("#about").length)$.fn.fullpage.moveTo(1),$(".panel-section").each(function(){var e=$(this).find(".fp-scrollable").data("iscrollInstance");e&&void 0!==typeof e&&e.scrollTo(0,0,0)});else{var t=$(".panel-section.active").find(".fp-scrollable").data("iscrollInstance");t&&void 0!==typeof t&&t.scrollTo(0,0,400)}}),$(".featured-project a").on({mouseenter:function(){if("undefined"!=typeof window.matchMedia||"undefined"!=typeof window.msMatchMedia)if(window.matchMedia("(min-width: 2200px)").matches)var e=537;else if(window.matchMedia("(min-width: 1800px) and (max-width: 2199px)").matches)var e=430;else if(window.matchMedia("(min-width: 1200px) and (max-width: 1799px)").matches)var e=331;else if(window.matchMedia("(min-width: 992px) and (max-width: 1199px)").matches)var e=285;else var e=235;else var e=235;var t=$(this),i=t.width(),o=$(window).width()-(e-10),a=t.attr("data-id"),l=$("#"+a+" .index-thumb");l.addClass("visible"),el.document.on("mousemove",function(e){var a=t.parent().offset(),n=e.clientX-a.left,s=n*o/i;l.css({left:s})})},mouseleave:function(){$(".index-thumb.visible").removeClass("visible"),el.document.off("mousemove")}});var i=$(".index-content a[href*='.mp4']");i.length&&!$(".slideshow-bg").length&&$("#main").append('<div class="slideshow-bg"></div>'),i.each(function(e){var t=$(this),i=t.attr("href"),o="s-c"+e;t.attr("data-slideshow","c"+e).addClass("custom-slideshow-trigger");var a='<div id="'+o+'" class="custom-slideshow slideshow-container-outer" data-type="video"><div class="slideshow-container"><div class="close-slideshow"><span></span></div><div class="slideshow-container-inner"><div class="swiper-container" ><div class="swiper-wrapper"><div class="swiper-slide"><div class="slide-content"><video id="v-c'+e+'" class="video-js vjs-default-skin" preload="none" controls><source src="'+i+'" type="video/mp4"></video></div></div></div></div></div></div></div>';$("#main").append(a)})}function init_projects(){function e(e,i){var o=i.find("ul"),a=o.width(),l=$(i).closest(".slideshow-container").width();if(a>l&&$(window).width()>=600){var n=t([0,l],[0,a-l],e);TweenMax.to(o,1,{x:-1*Math.min(Math.max(parseInt(n),0),a-l),ease:Power2.easeOut})}else $(window).width()<600?TweenMax.to(o,1,{x:0}):TweenMax.to(o,1,{x:0})}function t(e,t,i){return t[0]+(i-e[0])*(t[1]-t[0])/(e[1]-e[0])}var i=$(".accordion-container"),o=$(".project-thumb-cover img");i.each(function(){var e=$(this),t=$("hr",this),i=$(".read-more-toggle",this);t.length?(t.nextUntil(".read-more-toggle").wrapAll("<div class='text-accordion'></div>"),i.on("click",function(){$(this).html("+ <span>read more</span>"==$(this).html()?"â€“ <span>read less</span>":"+ <span>read more</span>"),$(this).prev(".text-accordion").slideToggle(500,function(){$.fn.fullpage.reBuild()})})):i.remove()}),objectFitImages(o),$(".slide-info-title").click(function(){$(this).toggleClass("opened"),$(this).next().slideToggle(400)});var a,l=$(".close-slideshow"),n=$(".slideshow-bg");if($(".project-thumb, .custom-slideshow-trigger").click(function(e){e.preventDefault(),$.fn.fullpage.setAllowScrolling(!1);var t=$(this).attr("data-slideshow"),i=$(".slideshow-container-outer#s-"+t),o=i.attr("data-type"),l=$(".slideshow-container-outer#s-"+t).find(".close-slideshow");if($(".slideshow-bg").addClass("is-visible"),i.addClass("opened"),el.html_body.addClass("overflow-hidden"),el.body.addClass("slideshow-is-opened"),"video"==o){var s=i.find(".video-js");s[0].player.play()}$(document).one("keyup",function(e){27==e.keyCode&&l.trigger("click")}),add_close_toggle=setTimeout(function(){n.one("click",function(){l.trigger("click")})},500),a=setTimeout(function(){i.addClass("is-visible")},3e3)}),$(document).on("click",".close-slideshow",function(){$(".slideshow-bg").removeClass("is-visible"),$(".slideshow-container-outer.opened").removeClass("is-visible opened"),el.body.removeClass("slideshow-is-opened"),$.fn.fullpage.setAllowScrolling(!0),$(".video-js").each(function(e){this.player.pause()}),clearTimeout(a),clearTimeout(add_close_toggle),setTimeout(function(){el.html_body.removeClass("overflow-hidden")},350)}),$("#intro-video").length&&!el.html.hasClass("is-mobile-tablet")){var s=document.getElementById("intro-video"),d=s.currentTime>0&&!s.paused&&!s.ended&&s.readyState>2;d||s.play()}$(".video-js").each(function(){var e=videojs(this.id,{inactivityTimeout:0})});var r=[];$(".slideshow-container-outer .swiper-container").each(function(e){var t=$(this),i=t,o=t.find(".slideshow-next"),a=t.find(".slideshow-prev"),l=i.closest(".slideshow-container"),n=t.closest("slideshow-container-outer").attr("data-type");if("images"==n?touch_drag_setting=!0:touch_drag_setting=!1,el.html.hasClass("is-mobile-tablet"))var s=!0;else var s=!1;var d=new Swiper(i,{slidePerView:1,centeredSlides:!0,setWrapperSize:!1,allowTouchMove:!1,navigation:{nextEl:o,prevEl:a},effect:"fade",fadeEffect:{crossFade:!1},allowTouchMove:s,speed:0,simulateTouch:touch_drag_setting,spaceBetween:0,preloadImages:!0,lazy:{loadPrevNext:!0,loadPrevNextAmount:40,preloaderClass:"preloader"},breakpoints:{1024:{navigation:{nextEl:$(this).find(".swiper-slide .slide-content")}}},on:{init:function(){l.imagesLoaded(function(){var e=l.find(".swiper-slide:first-child img").width();l.width(e),l.find(".swiper-slide:first-child").width(e)})},lazyImageReady:function(e){setTimeout(function(){var t=$(e).find("img").width();$(e).width(t)},300)},transitionStart:function(){var e=l.find(".swiper-slide").eq(d.activeIndex).width();l.width(e)}}});r.push(d)}),$(window).resizestart(function(){$('.slideshow-container-outer[data-type="images"] .swiper-slide').css("width",""),$('.slideshow-container-outer[data-type="images"] .slideshow-container').css("width","")}),$(window).on("resizeend",function(){$('.slideshow-container-outer[data-type="images"] .swiper-slide').css("width",""),$('.slideshow-container-outer[data-type="images"] .slideshow-container').css("width",""),$('.slideshow-container-outer[data-type="images"] .slideshow-container').each(function(){$(this).css("width",""),$(".swiper-slide").each(function(){var e=$(this).find("img").width();$(this).width(e)});var e=$(this).find(".swiper-slide-active").width();$(this).width(e)})}),$(".slideshow-container").each(function(e){var t=$(this);$(this).imagesLoaded(function(){var i=0;t.find(".thumbnails-wrapper ul li").each(function(e){i+=parseInt($(this).width())}),t.find(".thumbnails-wrapper ul").css("width",i+5+"px"),t.find(".thumbnails-wrapper ul li").each(function(){$(this).bind("click",function(t){var i=$(this).index();r[e].slideTo(i,0)})})})}),$(".thumbnails-wrapper").each(function(){$(this).mousemove(function(t){var i=$(this),o=$(this).parent().offset(),a=t.clientX-o.left;e(a,i)})})}window.onbeforeunload=function(){window.scrollTo(0,0)},$(document).ready(function(){el={document:$(document),window:$(window),html:$("html"),html_body:$("body"),body:$("body"),main:$("main"),menu_toggle:$(".menu-toggle"),menu_item:$(".menu a"),menu_accordion_toggle:$(".menu-accordion-toggle"),header_section_placeholder:$("#section-placeholder"),footer:$("#footer")},el.html.addClass(bowser.name.toLowerCase()),el.menu_item.on("click",function(e){e.preventDefault(),$(".menu-toggle").trigger("click");var t=$(this).attr("data-section-index"),i=$(this).attr("href");if($("#project-content").length&&$(this).hasClass("anchor-link")){var o=i;jQuery().ajaxify(o),t>1&&el.body.attr("data-theme","dark"),el.html.addClass("going-back")}else{if(el.html.hasClass("is-mobile-tablet")){var a=$(".panel-slide").eq(parseInt(t)-1).find(".panel-section-inner");a.animate({scrollTop:0},300)}else{var l=$(".panel-section").eq(parseInt(t)-1),n=l.find(".fp-scrollable").data("iscrollInstance");n&&void 0!==typeof n&&n.scrollTo(0,0,0),setTimeout(function(){l.nextAll(".panel-section").each(function(){var e=$(this).find(".fp-scrollable").data("iscrollInstance");e&&void 0!==typeof e&&e.scrollTo(0,0,0)})},1200)}setTimeout(function(){$("#project-content").length&&(t=parseInt(t)+1),el.html.hasClass("is-mobile-tablet")?$.fn.fullpage.moveTo(1,parseInt(t)-1):$.fn.fullpage.moveTo(t)},550)}}),el.menu_toggle.on("click",function(e){el.body.toggleClass("menu-open"),e.preventDefault(),$.fn.fullpage.setAllowScrolling(!0)}),el.menu_accordion_toggle.click(function(){$(".sub-menu").slideToggle(400),"+"==el.menu_accordion_toggle.text()?el.menu_accordion_toggle.text("-"):el.menu_accordion_toggle.text("+")}),init_fullpage(),el.body.imagesLoaded({background:!0},function(){setTimeout(function(){el.body.addClass("loaded"),setTimeout(function(){el.body.removeClass("loading"),setTimeout(function(){$(".project-view-header").removeClass("project-view-header")},200),setTimeout(function(){el.html.addClass("fully-loaded")},450),check_params(),$("[data-360-src]").each(function(){var e=$(this);e.attr("src",e.attr("data-360-src"))}),el.html.is(".edge, .ie")&&$.fn.fullpage.reBuild()},850)},1e3)}),init_home(),init_projects(),$("#main").ajaxify({selector:".async",prefetch:!1,refresh:!0,scrolltop:!1,requestDelay:400}),$(window).on("pronto.request",function(e,t){jQuery.cache("f"),el.body.addClass("init-loading"),$link_element=$(t.currentTarget),$(document).off("click keydown keyup mouseenter mouseleave touchend touchstart"),$(window).off("scroll"),$(".swiper-container").each(function(){this.swiper&&void 0!==typeof this.swiper&&this.swiper.destroy()});var i=$(".video-js");if(i.length&&i.each(function(){var e=document.getElementById(this.id);videojs(e).dispose()}),el.main.addClass("fade-out"),el.body.attr("data-theme","light").removeClass("loaded"),setTimeout(function(){el.body.addClass("loading")},400),$link_element.hasClass("thumb-toggle")&&!el.html.hasClass("is-mobile-tablet")){el.footer.addClass("is-loading thumb-expanded");var o=$link_element.attr("data-id"),a=$("#"+o+" .index-thumb"),l=a.clone();l.css("opacity","1").appendTo(".cloned-thumbs"),$(".featured-project a").off("mouseenter mouseleave"),TweenMax.to(l,.55,{top:0,left:0,width:"100vw",ease:Power4.easeInOut}),l.addClass("expand")}}),$(window).on("pronto.load",function(e,t){$.fn.fullpage.destroy("all")}),$(window).on("pronto.render",function(e,t){if(init_fullpage(),init_home(),init_projects(),$(".mobile-header em").text(""),$link_element.hasClass("thumb-toggle")||el.body.addClass("loaded"),$link_element.hasClass("thumb-toggle"))var i=400;else var i=850;setTimeout(function(){$link_element.hasClass("thumb-toggle")?el.main.fadeTo(0,1,function(){el.main.removeClass("fade-out").attr("style","")}):el.main.removeClass("fade-out"),$link_element.hasClass("thumb-toggle")&&$link_element.hasClass("project-toggle")?el.html.addClass("fully-loaded"):el.html.removeClass("fully-loaded"),$link_element.hasClass("thumb-toggle")&&el.body.addClass("loaded"),el.body.removeClass("loading init-loading"),$.fn.fullpage.reBuild(),setTimeout(function(){$(".project-view-header").removeClass("project-view-header"),el.footer.attr("class",""),$(".cloned-thumbs").empty(),el.html.removeClass("going-back"),$("[data-360-src]").each(function(){var e=$(this);e.attr("src",e.attr("data-360-src"))}),setTimeout(function(){el.html.addClass("fully-loaded")},1e3)},500),check_params()},i)})});
