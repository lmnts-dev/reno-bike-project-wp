"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function initSliders(){var t=document.querySelectorAll(".block-slider-el");0<t.length&&t.forEach(function(t){new Flickity(t,{cellAlign:"left",prevNextButtons:!1,fade:!0,wrapAround:!0,autoPlay:!0})});var e=document.querySelectorAll(".collection-listings-slider-el");0<e.length&&e.forEach(function(t){new Flickity(t,{contain:!0,cellAlign:"left",prevNextButtons:!0,pageDots:!1,freeScroll:!0})});var n=document.querySelectorAll(".featured-products-slider-el");0<n.length&&n.forEach(function(t){new Flickity(t,{cellAlign:"left",prevNextButtons:!0,pageDots:!1,wrapAround:!0,autoPlay:!0})});var i=document.querySelectorAll(".featured-news-slider-el");0<i.length&&i.forEach(function(t){new Flickity(t,{cellAlign:"left",prevNextButtons:!1,fade:!0,wrapAround:!0,autoPlay:!0})})}function initLazyLoad(){new LazyLoad({elements_selector:".lazy"})}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).barba=e()}(void 0,function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function t(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function _(){return(_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function r(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e,n){return(a=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&s(r,n.prototype),r}).apply(null,arguments)}function e(t){var n="function"==typeof Map?new Map:void 0;return(e=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return a(t,arguments,o(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),s(e,t)})(t)}function f(t,e){try{var n=t()}catch(t){return e(t)}return n&&n.then?n.then(void 0,e):n}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var u,n;(n=u=u||{})[n.off=0]="off",n[n.error=1]="error",n[n.warning=2]="warning",n[n.info=3]="info",n[n.debug=4]="debug";var h=u.off,S=function(){function i(t){this.t=t}i.getLevel=function(){return h},i.setLevel=function(t){return h=u[t]};var t=i.prototype;return t.error=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.i(console.error,u.error,e)},t.warn=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.i(console.warn,u.warning,e)},t.info=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.i(console.info,u.info,e)},t.debug=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.i(console.log,u.debug,e)},t.i=function(t,e,n){e<=i.getLevel()&&t.apply(console,["["+this.t+"] "].concat(n))},i}(),c=E,l=v,d=g,p=y,m=w,x="/",P=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function g(t,e){for(var n,i=[],r=0,o=0,s="",a=e&&e.delimiter||x,u=e&&e.whitelist||void 0,h=!1;null!==(n=P.exec(t));){var c=n[0],f=n[1],l=n.index;if(s+=t.slice(o,l),o=l+c.length,f)s+=f[1],h=!0;else{var d="",p=n[2],m=n[3],g=n[4],v=n[5];if(!h&&s.length){var y=s.length-1,b=s[y];(!u||-1<u.indexOf(b))&&(d=b,s=s.slice(0,y))}s&&(i.push(s),s="",h=!1);var w=m||g,E=d||a;i.push({name:p||r++,prefix:d,delimiter:E,optional:"?"===v||"*"===v,repeat:"+"===v||"*"===v,pattern:w?w.replace(/([=!:$/()])/g,"\\$1"):"[^"+T(E===a?E:E+a)+"]+?"})}}return(s||o<t.length)&&i.push(s+t.substr(o)),i}function v(h,c){return function(t,e){var n=h.exec(t);if(!n)return!1;for(var i=n[0],r=n.index,o={},s=e&&e.decode||decodeURIComponent,a=1;a<n.length;a++)if(void 0!==n[a]){var u=c[a-1];o[u.name]=u.repeat?n[a].split(u.delimiter).map(function(t){return s(t,u)}):s(n[a],u)}return{path:i,index:r,params:o}}}function y(c,t){for(var f=new Array(c.length),e=0;e<c.length;e++)"object"==_typeof(c[e])&&(f[e]=new RegExp("^(?:"+c[e].pattern+")$",b(t)));return function(t,e){for(var n="",i=e&&e.encode||encodeURIComponent,r=!e||!1!==e.validate,o=0;o<c.length;o++){var s=c[o];if("string"!=typeof s){var a,u=t?t[s.name]:void 0;if(Array.isArray(u)){if(!s.repeat)throw new TypeError('Expected "'+s.name+'" to not repeat, but got array');if(0===u.length){if(s.optional)continue;throw new TypeError('Expected "'+s.name+'" to not be empty')}for(var h=0;h<u.length;h++){if(a=i(u[h],s),r&&!f[o].test(a))throw new TypeError('Expected all "'+s.name+'" to match "'+s.pattern+'"');n+=(0===h?s.prefix:s.delimiter)+a}}else if("string"!=typeof u&&"number"!=typeof u&&"boolean"!=typeof u){if(!s.optional)throw new TypeError('Expected "'+s.name+'" to be '+(s.repeat?"an array":"a string"))}else{if(a=i(String(u),s),r&&!f[o].test(a))throw new TypeError('Expected "'+s.name+'" to match "'+s.pattern+'", but got "'+a+'"');n+=s.prefix+a}}else n+=s}return n}}function T(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function b(t){return t&&t.sensitive?"":"i"}function w(t,e,n){for(var i=(n=n||{}).strict,r=!1!==n.start,o=!1!==n.end,s=n.delimiter||x,a=[].concat(n.endsWith||[]).map(T).concat("$").join("|"),u=r?"^":"",h=0;h<t.length;h++){var c=t[h];if("string"==typeof c)u+=T(c);else{var f=c.repeat?"(?:"+c.pattern+")(?:"+T(c.delimiter)+"(?:"+c.pattern+"))*":c.pattern;e&&e.push(c),u+=c.optional?c.prefix?"(?:"+T(c.prefix)+"("+f+"))?":"("+f+")?":T(c.prefix)+"("+f+")"}}if(o)i||(u+="(?:"+T(s)+")?"),u+="$"===a?"$":"(?="+a+")";else{var l=t[t.length-1],d="string"==typeof l?l[l.length-1]===s:void 0===l;i||(u+="(?:"+T(s)+"(?="+a+"))?"),d||(u+="(?="+T(s)+"|"+a+")")}return new RegExp(u,b(n))}function E(t,e,n){return t instanceof RegExp?function(t,e){if(!e)return t;var n=t.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)e.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return t}(t,e):Array.isArray(t)?function(t,e,n){for(var i=[],r=0;r<t.length;r++)i.push(E(t[r],e,n).source);return new RegExp("(?:"+i.join("|")+")",b(n))}(t,e,n):(i=e,w(g(t,r=n),i,r));var i,r}c.match=function(t,e){var n=[];return v(E(t,n,e),n)},c.regexpToFunction=l,c.parse=d,c.compile=function(t,e){return y(g(t,e),e)},c.tokensToFunction=p,c.tokensToRegExp=m;function z(t,r){try{var e=function(){if(!r.next.html)return Promise.resolve(t).then(function(t){var e=r.next;if(t){var n=C.toElement(t);e.namespace=C.getNamespace(n),e.container=C.getContainer(n),e.html=t,j.update({ns:e.namespace});var i=C.toDocument(t);document.title=i.title}})}();return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(t){return Promise.reject(t)}}function L(){return window.location.origin}function O(t){return void 0===t&&(t=window.location.href),M(t).port}function I(t){return void 0===t&&(t=window.location.href),t.replace(/(\/#.*|\/|#.*)$/,"")}var k,R,A={container:"container",history:"history",namespace:"namespace",prefix:"data-barba",prevent:"prevent",wrapper:"wrapper"},C=((R=D.prototype).toString=function(t){return t.outerHTML},R.toDocument=function(t){return this.u.parseFromString(t,"text/html")},R.toElement=function(t){var e=document.createElement("div");return e.innerHTML=t,e},R.getHtml=function(t){return void 0===t&&(t=document),this.toString(t.documentElement)},R.getWrapper=function(t){return void 0===t&&(t=document),t.querySelector("["+this.o.prefix+'="'+this.o.wrapper+'"]')},R.getContainer=function(t){return void 0===t&&(t=document),t.querySelector("["+this.o.prefix+'="'+this.o.container+'"]')},R.removeContainer=function(t){document.body.contains(t)&&t.parentNode.removeChild(t)},R.addContainer=function(t,e){var n=this.getContainer();n?this.s(t,n):e.appendChild(t)},R.getNamespace=function(t){void 0===t&&(t=document);var e=t.querySelector("["+this.o.prefix+"-"+this.o.namespace+"]");return e?e.getAttribute(this.o.prefix+"-"+this.o.namespace):null},R.getHref=function(t){if(t.tagName&&"a"===t.tagName.toLowerCase()){if("string"==typeof t.href)return t.href;var e=t.getAttribute("href")||t.getAttribute("xlink:href");if(e)return this.resolveUrl(e.baseVal||e)}return null},R.resolveUrl=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e.length;if(0===i)throw new Error("resolveUrl requires at least one argument; got none.");var r=document.createElement("base");if(r.href=arguments[0],1===i)return r.href;var o=document.getElementsByTagName("head")[0];o.insertBefore(r,o.firstChild);for(var s,a=document.createElement("a"),u=1;u<i;u++)a.href=arguments[u],r.href=s=a.href;return o.removeChild(r),s},R.s=function(t,e){e.parentNode.insertBefore(t,e.nextSibling)},new D),j=((k=N.prototype).init=function(t,e){this.l="barba";var n={ns:e,scroll:{x:window.scrollX,y:window.scrollY},url:t};this.h.push(n),this.v=0;var i={from:this.l,index:0,states:[].concat(this.h)};window.history&&window.history.replaceState(i,"",t)},k.change=function(t,e,n){if(n&&n.state){var i=n.state,r=i.index;e=this.m(this.v-r),this.replace(i.states),this.v=r}else this.add(t,e);return e},k.add=function(t,e){var n=this.size,i=this.p(e),r={ns:"tmp",scroll:{x:window.scrollX,y:window.scrollY},url:t};this.h.push(r),this.v=n;var o={from:this.l,index:n,states:[].concat(this.h)};switch(i){case"push":window.history&&window.history.pushState(o,"",t);break;case"replace":window.history&&window.history.replaceState(o,"",t)}},k.update=function(t,e){var n=e||this.v,i=_({},this.get(n),{},t);this.set(n,i)},k.remove=function(t){t?this.h.splice(t,1):this.h.pop(),this.v--},k.clear=function(){this.h=[],this.v=-1},k.replace=function(t){this.h=t},k.get=function(t){return this.h[t]},k.set=function(t,e){return this.h[t]=e},k.p=function(t){var e="push",n=t,i=A.prefix+"-"+A.history;return n.hasAttribute&&n.hasAttribute(i)&&(e=n.getAttribute(i)),e},k.m=function(t){return 1<Math.abs(t)?0<t?"forward":"back":0===t?"popstate":0<t?"back":"forward"},t(N,[{key:"current",get:function(){return this.h[this.v]}},{key:"state",get:function(){return this.h[this.h.length-1]}},{key:"previous",get:function(){return this.v<1?null:this.h[this.v-1]}},{key:"size",get:function(){return this.h.length}}]),new N),W=c,q={__proto__:null,update:z,nextTick:function(){return new Promise(function(t){window.requestAnimationFrame(t)})},pathToRegexp:W},M=function(t){var e,n=t.match(/:\d+/);if(null===n)/^http/.test(t)&&(e=80),/^https/.test(t)&&(e=443);else{var i=n[0].substring(1);e=parseInt(i,10)}var r,o=t.replace(L(),""),s={},a=o.indexOf("#");0<=a&&(r=o.slice(a+1),o=o.slice(0,a));var u=o.indexOf("?");return 0<=u&&(s=B(o.slice(u+1)),o=o.slice(0,u)),{hash:r,path:o,port:e,query:s}},B=function(t){return t.split("&").reduce(function(t,e){var n=e.split("=");return t[n[0]]=n[1],t},{})},H={__proto__:null,getHref:function(){return window.location.href},getOrigin:L,getPort:O,getPath:function(t){return void 0===t&&(t=window.location.href),M(t).path},parse:M,parseQuery:B,clean:I};function N(){this.h=[],this.v=-1}function D(){this.o=A,this.u=new DOMParser}function F(r,o,s){return void 0===o&&(o=2e3),new Promise(function(e,n){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(i.readyState===XMLHttpRequest.DONE)if(200===i.status)e(i.responseText);else if(i.status){var t={status:i.status,statusText:i.statusText};s(r,t),n(t)}},i.ontimeout=function(){var t=new Error("Timeout error ["+o+"]");s(r,t),n(t)},i.onerror=function(){var t=new Error("Fetch error");s(r,t),n(t)},i.open("GET",r),i.timeout=o,i.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml"),i.setRequestHeader("x-barba","yes"),i.send()})}function U(s,a){return void 0===a&&(a={}),function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];var o=!1;return new Promise(function(n,i){a.async=function(){return o=!0,function(t,e){t?i(t):n(e)}};var t,e=s.apply(a,r);o||(!(t=e)||"object"!=_typeof(t)&&"function"!=typeof t||"function"!=typeof t.then?n(e):e.then(n,i))})}}function Y(){return!window.history.pushState}function $(t){return!t.el||!t.href}function Q(t){var e=t.event;return 1<e.which||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey}function G(t){var e=t.el;return e.hasAttribute("target")&&"_blank"===e.target}function V(t){var e=t.el;return void 0!==e.protocol&&window.location.protocol!==e.protocol||void 0!==e.hostname&&window.location.hostname!==e.hostname}function X(t){var e=t.el;return void 0!==e.port&&O()!==O(e.href)}function K(t){var e=t.el;return e.getAttribute&&"string"==typeof e.getAttribute("download")}function Z(t){return t.el.hasAttribute(A.prefix+"-"+A.prevent)}function J(t){return Boolean(t.el.closest("["+A.prefix+"-"+A.prevent+'="all"]'))}function tt(t){var e=t.href;return I(e)===I()&&O(e)===O()}var et,nt,it,rt=new(function(e){function t(){var t;return(t=e.call(this)||this).logger=new S("@barba/core"),t.all=["ready","page","reset","currentAdded","currentRemoved","nextAdded","nextRemoved","beforeOnce","once","afterOnce","before","beforeLeave","leave","afterLeave","beforeEnter","enter","afterEnter","after"],t.registered=new Map,t.init(),t}r(t,e);var n=t.prototype;return n.init=function(){var i=this;this.registered.clear(),this.all.forEach(function(n){i[n]||(i[n]=function(t,e){i.registered.has(n)||i.registered.set(n,new Set),i.registered.get(n).add({ctx:e||{},fn:t})})})},n.do=function(e){for(var n=this,t=arguments.length,i=new Array(1<t?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];if(this.registered.has(e)){var o=Promise.resolve();return this.registered.get(e).forEach(function(t){o=o.then(function(){return U(t.fn,t.ctx).apply(void 0,i)})}),o.catch(function(t){n.logger.debug("Hook error ["+e+"]"),n.logger.error(t)})}return Promise.resolve()},n.clear=function(){var e=this;this.all.forEach(function(t){delete e[t]}),this.init()},n.help=function(){this.logger.info("Available hooks: "+this.all.join(","));var n=[];this.registered.forEach(function(t,e){return n.push(e)}),this.logger.info("Registered hooks: "+n.join(","))},t}(function(){})),ot=(gt.prototype.checkHref=function(t){if("boolean"==typeof this.g)return this.g;var e=M(t).path;return this.P.some(function(t){return null!==t.exec(e)})},gt),st=function(n){function t(t){var e;return(e=n.call(this,t)||this).k=new Map,e}r(t,n);var e=t.prototype;return e.set=function(t,e,n){return this.k.set(t,{action:n,request:e}),{action:n,request:e}},e.get=function(t){return this.k.get(t)},e.getRequest=function(t){return this.k.get(t).request},e.getAction=function(t){return this.k.get(t).action},e.has=function(t){return!this.checkHref(t)&&this.k.has(t)},e.delete=function(t){return this.k.delete(t)},e.update=function(t,e){var n=_({},this.k.get(t),{},e);return this.k.set(t,n),n},t}(ot),at=function(n){function t(t){var e;return(e=n.call(this,t)||this).suite=[],e.tests=new Map,e.init(),e}r(t,n);var e=t.prototype;return e.init=function(){this.add("pushState",Y),this.add("exists",$),this.add("newTab",Q),this.add("blank",G),this.add("corsDomain",V),this.add("corsPort",X),this.add("download",K),this.add("preventSelf",Z),this.add("preventAll",J),this.add("sameUrl",tt,!1)},e.add=function(t,e,n){void 0===n&&(n=!0),this.tests.set(t,e),n&&this.suite.push(t)},e.run=function(t,e,n,i){return this.tests.get(t)({el:e,event:n,href:i})},e.checkLink=function(e,n,i){var r=this;return this.suite.some(function(t){return r.run(t,e,n,i)})},t}(ot),ut=(r(mt,it=e(Error)),mt),ht=((nt=pt.prototype).add=function(t,e){switch(t){case"rule":this.A.splice(e.position||0,0,e.value);break;case"transition":default:this.all.push(e)}this.update()},nt.resolve=function(r,t){var o=this;void 0===t&&(t={});var e=t.once?this.once:this.page;e=e.filter(t.self?function(t){return t.name&&"self"===t.name}:function(t){return!t.name||"self"!==t.name});var s=new Map,n=e.find(function(e){var n=!0,i={};return!(!t.self||"self"!==e.name)||(o.A.reverse().forEach(function(t){n&&(n=o.R(e,t,r,i),e.from&&e.to&&(n=o.R(e,t,r,i,"from")&&o.R(e,t,r,i,"to")),e.from&&!e.to&&(n=o.R(e,t,r,i,"from")),!e.from&&e.to&&(n=o.R(e,t,r,i,"to")))}),s.set(e,i),n)}),i=s.get(n),a=[];if(a.push(t.once?"once":"page"),t.self&&a.push("self"),i){var u,h=[n];0<Object.keys(i).length&&h.push(i),(u=this.logger).info.apply(u,["Transition found ["+a.join(",")+"]"].concat(h))}else this.logger.info("No transition found ["+a.join(",")+"]");return n},nt.update=function(){var e=this;this.all=this.all.map(function(t){return e.T(t)}).sort(function(t,e){return t.priority-e.priority}).reverse().map(function(t){return delete t.priority,t}),this.page=this.all.filter(function(t){return void 0!==t.leave||void 0!==t.enter}),this.once=this.all.filter(function(t){return void 0!==t.once})},nt.R=function(t,e,n,i,r){var o=!0,s=!1,a=t,u=e.name,h=u,c=u,f=u,l=r?a[r]:a,d="to"===r?n.next:n.current;if((!r||l)&&l[u]){switch(e.type){case"strings":default:var p=Array.isArray(l[h])?l[h]:[l[h]];d[h]&&-1!==p.indexOf(d[h])&&(s=!0),-1===p.indexOf(d[h])&&(o=!1);break;case"object":var m=Array.isArray(l[c])?l[c]:[l[c]];d[c]?(d[c].name&&-1!==m.indexOf(d[c].name)&&(s=!0),-1===m.indexOf(d[c].name)&&(o=!1)):o=!1;break;case"function":l[f](n)?s=!0:o=!1}s&&(r?(i[r]=i[r]||{},i[r][u]=a[r][u]):i[u]=a[u])}return o},nt.O=function(t,e,n){var i=0;return(t[e]||t.from&&t.from[e]||t.to&&t.to[e])&&(i+=Math.pow(10,n),t.from&&t.from[e]&&(i+=1),t.to&&t.to[e]&&(i+=2)),i},nt.T=function(n){var i=this,r=n.priority=0;return this.A.forEach(function(t,e){r+=i.O(n,t.name,e+1)}),n.priority=r,n},pt),ct=((et=dt.prototype).get=function(t,e){return this.store.resolve(t,e)},et.doOnce=function(t){var e=t.data,n=t.transition;try{var i=function(){r.S=!1},r=this,o=n||{};r.S=!0;var s=f(function(){return Promise.resolve(r.j("beforeOnce",e,o)).then(function(){return Promise.resolve(r.once(e,o)).then(function(){return Promise.resolve(r.j("afterOnce",e,o)).then(function(){})})})},function(t){r.S=!1,r.logger.debug("Transition error [before/after/once]"),r.logger.error(t)});return Promise.resolve(s&&s.then?s.then(i):i())}catch(t){return Promise.reject(t)}},et.doPage=function(t){var i=t.data,e=t.transition,r=t.page,o=t.wrapper;try{var n=function(t){if(s)return t;a.S=!1},s=!1,a=this,u=e||{},h=!0===u.sync||!1;a.S=!0;var c=f(function(){function t(){return Promise.resolve(a.j("before",i,u)).then(function(){function t(t){return Promise.resolve(a.remove(i)).then(function(){return Promise.resolve(a.j("after",i,u)).then(function(){})})}var e=function(){if(h)return f(function(){return Promise.resolve(a.add(i,o)).then(function(){return Promise.resolve(a.j("beforeLeave",i,u)).then(function(){return Promise.resolve(a.j("beforeEnter",i,u)).then(function(){return Promise.resolve(Promise.all([a.leave(i,u),a.enter(i,u)])).then(function(){return Promise.resolve(a.j("afterLeave",i,u)).then(function(){return Promise.resolve(a.j("afterEnter",i,u)).then(function(){})})})})})})},function(t){if(a.M(t))throw new ut(t,"Transition error [sync]")});function t(){return f(function(){var t=function(){if(!1!==e)return Promise.resolve(a.add(i,o)).then(function(){return Promise.resolve(a.j("beforeEnter",i,u)).then(function(){return Promise.resolve(a.enter(i,u,e)).then(function(){return Promise.resolve(a.j("afterEnter",i,u)).then(function(){})})})})}();if(t&&t.then)return t.then(function(){})},function(t){if(a.M(t))throw new ut(t,"Transition error [before/after/enter]")})}var e=!1,n=f(function(){return Promise.resolve(a.j("beforeLeave",i,u)).then(function(){return Promise.resolve(Promise.all([a.leave(i,u),z(r,i)]).then(function(t){return t[0]})).then(function(t){return e=t,Promise.resolve(a.j("afterLeave",i,u)).then(function(){})})})},function(t){if(a.M(t))throw new ut(t,"Transition error [before/after/leave]")});return n&&n.then?n.then(t):t()}();return e&&e.then?e.then(t):t()})}var e=function(){if(h)return Promise.resolve(z(r,i)).then(function(){})}();return e&&e.then?e.then(t):t()},function(t){if(a.S=!1,t.name&&"BarbaError"===t.name)throw a.logger.debug(t.label),a.logger.error(t.error),t;throw a.logger.debug("Transition error [page]"),a.logger.error(t),t});return Promise.resolve(c&&c.then?c.then(n):n(c))}catch(t){return Promise.reject(t)}},et.once=function(t,e){try{return Promise.resolve(rt.do("once",t,e)).then(function(){return e.once?U(e.once,e)(t):Promise.resolve()})}catch(t){return Promise.reject(t)}},et.leave=function(t,e){try{return Promise.resolve(rt.do("leave",t,e)).then(function(){return e.leave?U(e.leave,e)(t):Promise.resolve()})}catch(t){return Promise.reject(t)}},et.enter=function(t,e,n){try{return Promise.resolve(rt.do("enter",t,e)).then(function(){return e.enter?U(e.enter,e)(t,n):Promise.resolve()})}catch(t){return Promise.reject(t)}},et.add=function(t,e){try{return C.addContainer(t.next.container,e),rt.do("nextAdded",t),Promise.resolve()}catch(t){return Promise.reject(t)}},et.remove=function(t){try{return C.removeContainer(t.current.container),rt.do("currentRemoved",t),Promise.resolve()}catch(t){return Promise.reject(t)}},et.M=function(t){return t.message?!/Timeout error|Fetch error/.test(t.message):!t.status},et.j=function(t,e,n){try{return Promise.resolve(rt.do(t,e,n)).then(function(){return n[t]?U(n[t],n)(e):Promise.resolve()})}catch(t){return Promise.reject(t)}},t(dt,[{key:"isRunning",get:function(){return this.S},set:function(t){this.S=t}},{key:"hasOnce",get:function(){return 0<this.store.once.length}},{key:"hasSelf",get:function(){return this.store.all.some(function(t){return"self"===t.name})}},{key:"shouldWait",get:function(){return this.store.all.some(function(t){return t.to&&!t.to.route||t.sync})}}]),dt),ft=(lt.prototype.L=function(i){var r=this;return function(t){var e=i.match(/enter/i)?t.next:t.current,n=r.byNamespace.get(e.namespace);return n&&n[i]?U(n[i],n)(t):Promise.resolve()}},lt);function lt(t){var e=this;this.names=["beforeLeave","afterLeave","beforeEnter","afterEnter"],this.byNamespace=new Map,0!==t.length&&(t.forEach(function(t){e.byNamespace.set(t.namespace,t)}),this.names.forEach(function(t){rt[t](e.L(t))}))}function dt(t){void 0===t&&(t=[]),this.logger=new S("@barba/core"),this.S=!1,this.store=new ht(t)}function pt(t){void 0===t&&(t=[]),this.logger=new S("@barba/core"),this.all=[],this.page=[],this.once=[],this.A=[{name:"namespace",type:"strings"},{name:"custom",type:"function"}],t&&(this.all=this.all.concat(t)),this.update()}function mt(t,e){var n;void 0===e&&(e="Barba error");for(var i=arguments.length,r=new Array(2<i?i-2:0),o=2;o<i;o++)r[o-2]=arguments[o];return(n=it.call.apply(it,[this].concat(r))||this).error=t,n.label=e,Error.captureStackTrace&&Error.captureStackTrace(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n),mt),n.name="BarbaError",n}function gt(t){if(this.P=[],"boolean"==typeof t)this.g=t;else{var e=Array.isArray(t)?t:[t];this.P=e.map(function(t){return W(t)})}}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});var vt,yt={container:null,html:"",namespace:"",url:{hash:"",href:"",path:"",port:null,query:{}}};return(vt=bt.prototype).use=function(t,e){var n=this.plugins;-1<n.indexOf(t)?this.logger.warn("Plugin ["+t.name+"] already installed."):"function"==typeof t.install?(t.install(this,e),n.push(t)):this.logger.warn("Plugin ["+t.name+'] has no "install" method.')},vt.init=function(t){var e=void 0===t?{}:t,n=e.transitions,i=void 0===n?[]:n,r=e.views,o=void 0===r?[]:r,s=e.schema,a=void 0===s?A:s,u=e.requestError,h=e.timeout,c=void 0===h?2e3:h,f=e.cacheIgnore,l=void 0!==f&&f,d=e.prefetchIgnore,p=void 0!==d&&d,m=e.preventRunning,g=void 0!==m&&m,v=e.prevent,y=void 0===v?null:v,b=e.debug,w=e.logLevel;if(S.setLevel(!0===(void 0!==b&&b)?"debug":void 0===w?"off":w),this.logger.info(this.version),Object.keys(a).forEach(function(t){A[t]&&(A[t]=a[t])}),this.$=u,this.timeout=c,this.cacheIgnore=l,this.prefetchIgnore=p,this.preventRunning=g,this._=this.dom.getWrapper(),!this._)throw new Error("[@barba/core] No Barba wrapper found");this._.setAttribute("aria-live","polite"),this.q();var E=this.data.current;if(!E.container)throw new Error("[@barba/core] No Barba container found");if(this.cache=new st(l),this.prevent=new at(p),this.transitions=new ct(i),this.views=new ft(o),null!==y){if("function"!=typeof y)throw new Error("[@barba/core] Prevent should be a function");this.prevent.add("preventCustom",y)}this.history.init(E.url.href,E.namespace),this.B=this.B.bind(this),this.U=this.U.bind(this),this.D=this.D.bind(this),this.F(),this.plugins.forEach(function(t){return t.init()});var x=this.data;x.trigger="barba",x.next=x.current,x.current=_({},this.schemaPage),this.hooks.do("ready",x),this.once(x),this.q()},vt.destroy=function(){this.q(),this.H(),this.history.clear(),this.hooks.clear(),this.plugins=[]},vt.force=function(t){window.location.assign(t)},vt.go=function(t,e,n){var i;if(void 0===e&&(e="barba"),this.transitions.isRunning)this.force(t);else if(!(i="popstate"===e?this.history.current&&this.url.getPath(this.history.current.url)===this.url.getPath(t):this.prevent.run("sameUrl",null,null,t))||this.transitions.hasSelf)return e=this.history.change(t,e,n),n&&(n.stopPropagation(),n.preventDefault()),this.page(t,e,i)},vt.once=function(n){try{var i=this;return Promise.resolve(i.hooks.do("beforeEnter",n)).then(function(){function t(){return Promise.resolve(i.hooks.do("afterEnter",n)).then(function(){})}var e=function(){if(i.transitions.hasOnce){var t=i.transitions.get(n,{once:!0});return Promise.resolve(i.transitions.doOnce({transition:t,data:n})).then(function(){})}}();return e&&e.then?e.then(t):t()})}catch(n){return Promise.reject(n)}},vt.page=function(t,e,n){try{var i=function(){var e=r.data;return Promise.resolve(r.hooks.do("page",e)).then(function(){var t=f(function(){var t=r.transitions.get(e,{once:!1,self:n});return Promise.resolve(r.transitions.doPage({data:e,page:o,transition:t,wrapper:r._})).then(function(){r.q()})},function(){0===S.getLevel()&&r.force(e.current.url.href)});if(t&&t.then)return t.then(function(){})})},r=this;r.data.next.url=_({href:t},r.url.parse(t)),r.data.trigger=e;var o=r.cache.has(t)?r.cache.update(t,{action:"click"}).request:r.cache.set(t,r.request(t,r.timeout,r.onRequestError.bind(r,e)),"click").request,s=function(){if(r.transitions.shouldWait)return Promise.resolve(z(o,r.data)).then(function(){})}();return Promise.resolve(s&&s.then?s.then(i):i())}catch(t){return Promise.reject(t)}},vt.onRequestError=function(t){this.transitions.isRunning=!1;for(var e=arguments.length,n=new Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=n[0],o=n[1],s=this.cache.getAction(r);return this.cache.delete(r),!(this.$&&!1===this.$(t,s,r,o)||("click"===s&&this.force(r),1))},vt.prefetch=function(t){var e=this;this.cache.has(t)||this.cache.set(t,this.request(t,this.timeout,this.onRequestError.bind(this,"barba")).catch(function(t){e.logger.error(t)}),"prefetch")},vt.F=function(){!0!==this.prefetchIgnore&&(document.addEventListener("mouseover",this.B),document.addEventListener("touchstart",this.B)),document.addEventListener("click",this.U),window.addEventListener("popstate",this.D)},vt.H=function(){!0!==this.prefetchIgnore&&(document.removeEventListener("mouseover",this.B),document.removeEventListener("touchstart",this.B)),document.removeEventListener("click",this.U),window.removeEventListener("popstate",this.D)},vt.B=function(t){var e=this,n=this.I(t);if(n){var i=this.dom.getHref(n);this.prevent.checkHref(i)||this.cache.has(i)||this.cache.set(i,this.request(i,this.timeout,this.onRequestError.bind(this,n)).catch(function(t){e.logger.error(t)}),"enter")}},vt.U=function(t){var e=this.I(t);if(e)return this.transitions.isRunning&&this.preventRunning?(t.preventDefault(),void t.stopPropagation()):void this.go(this.dom.getHref(e),e,t)},vt.D=function(t){this.go(this.url.getHref(),"popstate",t)},vt.I=function(t){for(var e=t.target;e&&!this.dom.getHref(e);)e=e.parentNode;if(e&&!this.prevent.checkLink(e,t,this.dom.getHref(e)))return e},vt.q=function(){var t=this.url.getHref(),e={container:this.dom.getContainer(),html:this.dom.getHtml(),namespace:this.dom.getNamespace(),url:_({href:t},this.url.parse(t))};this.C={current:e,next:_({},this.schemaPage),trigger:void 0},this.hooks.do("reset",this.data)},t(bt,[{key:"data",get:function(){return this.C}},{key:"wrapper",get:function(){return this._}}]),new bt;function bt(){this.version="2.9.7",this.schemaPage=yt,this.Logger=S,this.logger=new S("@barba/core"),this.plugins=[],this.hooks=rt,this.dom=C,this.helpers=q,this.history=j,this.request=F,this.url=H}}),barba.init({prevent:function(t){var e=t.el;return e.classList&&e.classList.contains("barba-prevent")},transitions:[{leave:function(t){t.current,t.next,t.trigger},beforeEnter:function(t){t.current,t.next,t.trigger;window.scrollTo(0,0),initLazyLoad(),initMaps(),initMasonry(),initBikeWheel(),initSliders(),initSocialOverlay(),initVideoOverlay()}}]}),barba.hooks.after(function(){ga("set","page",window.location.pathname),ga("send","pageview")}),initSliders(),initLazyLoad(),function(e,n){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(t){return n(e,t)}):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=n(e,require("jquery")):e.jQueryBridget=n(e,e.jQuery)}(window,function(t,e){function n(h,r,c){(c=c||e||t.jQuery)&&(r.prototype.option||(r.prototype.option=function(t){c.isPlainObject(t)&&(this.options=c.extend(!0,this.options,t))}),c.fn[h]=function(t){if("string"!=typeof t)return i=t,this.each(function(t,e){var n=c.data(e,h);n?(n.option(i),n._init()):(n=new r(e,i),c.data(e,h,n))}),this;var e,o,s,a,u,i,n=f.call(arguments,1);return s=n,u="$()."+h+'("'+(o=t)+'")',(e=this).each(function(t,e){var n=c.data(e,h);if(n){var i=n[o];if(i&&"_"!=o.charAt(0)){var r=i.apply(n,s);a=void 0===a?r:a}else l(u+" is not a valid method")}else l(h+" not initialized. Cannot call methods, i.e. "+u)}),void 0!==a?a:e},i(c))}function i(t){!t||t&&t.bridget||(t.bridget=n)}var f=Array.prototype.slice,r=t.console,l=void 0===r?function(){}:function(t){r.error(t)};return i(e||t.jQuery),n}),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:void 0,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var n=this._events=this._events||{},i=n[t]=n[t]||[];return-1==i.indexOf(e)&&i.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var n=this._onceEvents=this._onceEvents||{};return(n[t]=n[t]||{})[e]=!0,this}},e.off=function(t,e){var n=this._events&&this._events[t];if(n&&n.length){var i=n.indexOf(e);return-1!=i&&n.splice(i,1),this}},e.emitEvent=function(t,e){var n=this._events&&this._events[t];if(n&&n.length){n=n.slice(0),e=e||[];for(var i=this._onceEvents&&this._onceEvents[t],r=0;r<n.length;r++){var o=n[r];i&&i[o]&&(this.off(t,o),delete i[o]),o.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t}),function(t,e){"function"==typeof define&&define.amd?define("get-size/get-size",e):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e():t.getSize=e()}(window,function(){function v(t){var e=parseFloat(t);return-1==t.indexOf("%")&&!isNaN(e)&&e}function y(t){var e=getComputedStyle(t);return e||n("Style returned "+e+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),e}function b(t){if(function(){if(!_){_=!0;var t=document.createElement("div");t.style.width="200px",t.style.padding="1px 2px 3px 4px",t.style.borderStyle="solid",t.style.borderWidth="1px 2px 3px 4px",t.style.boxSizing="border-box";var e=document.body||document.documentElement;e.appendChild(t);var n=y(t);w=200==Math.round(v(n.width)),b.isBoxSizeOuter=w,e.removeChild(t)}}(),"string"==typeof t&&(t=document.querySelector(t)),t&&"object"==_typeof(t)&&t.nodeType){var e=y(t);if("none"==e.display)return function(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;e<x;e++){t[E[e]]=0}return t}();var n={};n.width=t.offsetWidth,n.height=t.offsetHeight;for(var i=n.isBorderBox="border-box"==e.boxSizing,r=0;r<x;r++){var o=E[r],s=e[o],a=parseFloat(s);n[o]=isNaN(a)?0:a}var u=n.paddingLeft+n.paddingRight,h=n.paddingTop+n.paddingBottom,c=n.marginLeft+n.marginRight,f=n.marginTop+n.marginBottom,l=n.borderLeftWidth+n.borderRightWidth,d=n.borderTopWidth+n.borderBottomWidth,p=i&&w,m=v(e.width);!1!==m&&(n.width=m+(p?0:u+l));var g=v(e.height);return!1!==g&&(n.height=g+(p?0:h+d)),n.innerWidth=n.width-(u+l),n.innerHeight=n.height-(h+d),n.outerWidth=n.width+c,n.outerHeight=n.height+f,n}}var w,n="undefined"==typeof console?function(){}:function(t){console.error(t)},E=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],x=E.length,_=!1;return b}),function(t,e){"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e():t.matchesSelector=e()}(window,function(){var n=function(){var t=window.Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],n=0;n<e.length;n++){var i=e[n]+"MatchesSelector";if(t[i])return i}}();return function(t,e){return t[n](e)}}),function(e,n){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(t){return n(e,t)}):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=n(e,require("desandro-matches-selector")):e.fizzyUIUtils=n(e,e.matchesSelector)}(window,function(h,o){var c={extend:function(t,e){for(var n in e)t[n]=e[n];return t},modulo:function(t,e){return(t%e+e)%e}},e=Array.prototype.slice;c.makeArray=function(t){return Array.isArray(t)?t:null==t?[]:"object"==_typeof(t)&&"number"==typeof t.length?e.call(t):[t]},c.removeFrom=function(t,e){var n=t.indexOf(e);-1!=n&&t.splice(n,1)},c.getParent=function(t,e){for(;t.parentNode&&t!=document.body;)if(t=t.parentNode,o(t,e))return t},c.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},c.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},c.filterFindElements=function(t,i){t=c.makeArray(t);var r=[];return t.forEach(function(t){if(t instanceof HTMLElement){if(!i)return void r.push(t);o(t,i)&&r.push(t);for(var e=t.querySelectorAll(i),n=0;n<e.length;n++)r.push(e[n])}}),r},c.debounceMethod=function(t,e,i){i=i||100;var r=t.prototype[e],o=e+"Timeout";t.prototype[e]=function(){var t=this[o];clearTimeout(t);var e=arguments,n=this;this[o]=setTimeout(function(){r.apply(n,e),delete n[o]},i)}},c.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},c.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,n){return e+"-"+n}).toLowerCase()};var f=h.console;return c.htmlInit=function(a,u){c.docReady(function(){var t=c.toDashed(u),r="data-"+t,e=document.querySelectorAll("["+r+"]"),n=document.querySelectorAll(".js-"+t),i=c.makeArray(e).concat(c.makeArray(n)),o=r+"-options",s=h.jQuery;i.forEach(function(e){var t,n=e.getAttribute(r)||e.getAttribute(o);try{t=n&&JSON.parse(n)}catch(t){return void(f&&f.error("Error parsing "+r+" on "+e.className+": "+t))}var i=new a(e,t);s&&s.data(e,u,i)})})},c}),function(t,e){"function"==typeof define&&define.amd?define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],e):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e(require("ev-emitter"),require("get-size")):(t.Outlayer={},t.Outlayer.Item=e(t.EvEmitter,t.getSize))}(window,function(t,e){function n(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}var i=document.documentElement.style,r="string"==typeof i.transition?"transition":"WebkitTransition",o="string"==typeof i.transform?"transform":"WebkitTransform",s={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[r],a={transform:o,transition:r,transitionDuration:r+"Duration",transitionProperty:r+"Property",transitionDelay:r+"Delay"},u=n.prototype=Object.create(t.prototype);u.constructor=n,u._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},u.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},u.getSize=function(){this.size=e(this.element)},u.css=function(t){var e=this.element.style;for(var n in t){e[a[n]||n]=t[n]}},u.getPosition=function(){var t=getComputedStyle(this.element),e=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop"),i=t[e?"left":"right"],r=t[n?"top":"bottom"],o=parseFloat(i),s=parseFloat(r),a=this.layout.size;-1!=i.indexOf("%")&&(o=o/100*a.width),-1!=r.indexOf("%")&&(s=s/100*a.height),o=isNaN(o)?0:o,s=isNaN(s)?0:s,o-=e?a.paddingLeft:a.paddingRight,s-=n?a.paddingTop:a.paddingBottom,this.position.x=o,this.position.y=s},u.layoutPosition=function(){var t=this.layout.size,e={},n=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop"),r=n?"paddingLeft":"paddingRight",o=n?"left":"right",s=n?"right":"left",a=this.position.x+t[r];e[o]=this.getXValue(a),e[s]="";var u=i?"paddingTop":"paddingBottom",h=i?"top":"bottom",c=i?"bottom":"top",f=this.position.y+t[u];e[h]=this.getYValue(f),e[c]="",this.css(e),this.emitEvent("layout",[this])},u.getXValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!e?t/this.layout.size.width*100+"%":t+"px"},u.getYValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&e?t/this.layout.size.height*100+"%":t+"px"},u._transitionTo=function(t,e){this.getPosition();var n=this.position.x,i=this.position.y,r=t==this.position.x&&e==this.position.y;if(this.setPosition(t,e),!r||this.isTransitioning){var o=t-n,s=e-i,a={};a.transform=this.getTranslate(o,s),this.transition({to:a,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})}else this.layoutPosition()},u.getTranslate=function(t,e){return"translate3d("+(t=this.layout._getOption("originLeft")?t:-t)+"px, "+(e=this.layout._getOption("originTop")?e:-e)+"px, 0)"},u.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},u.moveTo=u._transitionTo,u.setPosition=function(t,e){this.position.x=parseFloat(t),this.position.y=parseFloat(e)},u._nonTransition=function(t){for(var e in this.css(t.to),t.isCleaning&&this._removeStyles(t.to),t.onTransitionEnd)t.onTransitionEnd[e].call(this)},u.transition=function(t){if(parseFloat(this.layout.options.transitionDuration)){var e=this._transn;for(var n in t.onTransitionEnd)e.onEnd[n]=t.onTransitionEnd[n];for(n in t.to)e.ingProperties[n]=!0,t.isCleaning&&(e.clean[n]=!0);if(t.from){this.css(t.from);this.element.offsetHeight;0}this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0}else this._nonTransition(t)};var h="opacity,"+o.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()});u.enableTransition=function(){if(!this.isTransitioning){var t=this.layout.options.transitionDuration;t="number"==typeof t?t+"ms":t,this.css({transitionProperty:h,transitionDuration:t,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(s,this,!1)}},u.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},u.onotransitionend=function(t){this.ontransitionend(t)};var c={"-webkit-transform":"transform"};u.ontransitionend=function(t){if(t.target===this.element){var e=this._transn,n=c[t.propertyName]||t.propertyName;if(delete e.ingProperties[n],function(t){for(var e in t)return;return 1}(e.ingProperties)&&this.disableTransition(),n in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[n]),n in e.onEnd)e.onEnd[n].call(this),delete e.onEnd[n];this.emitEvent("transitionEnd",[this])}},u.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(s,this,!1),this.isTransitioning=!1},u._removeStyles=function(t){var e={};for(var n in t)e[n]="";this.css(e)};var f={transitionProperty:"",transitionDuration:"",transitionDelay:""};return u.removeTransitionStyles=function(){this.css(f)},u.stagger=function(t){t=isNaN(t)?0:t,this.staggerDelay=t+"ms"},u.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},u.remove=function(){return r&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),void this.hide()):void this.removeElem()},u.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0,onTransitionEnd:e})},u.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},u.getHideRevealTransitionEndProperty=function(t){var e=this.layout.options[t];if(e.opacity)return"opacity";for(var n in e)return n},u.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:e})},u.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},u.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},n}),function(r,o){"function"==typeof define&&define.amd?define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(t,e,n,i){return o(r,t,e,n,i)}):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=o(r,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):r.Outlayer=o(r,r.EvEmitter,r.getSize,r.fizzyUIUtils,r.Outlayer.Item)}(window,function(t,e,r,o,i){function s(t,e){var n=o.getQueryElement(t);if(n){this.element=n,h&&(this.$element=h(this.element)),this.options=o.extend({},this.constructor.defaults),this.option(e);var i=++c;this.element.outlayerGUID=i,(f[i]=this)._create(),this._getOption("initLayout")&&this.layout()}else u&&u.error("Bad element for "+this.constructor.namespace+": "+(n||t))}function a(t){function e(){t.apply(this,arguments)}return(e.prototype=Object.create(t.prototype)).constructor=e}function n(){}var u=t.console,h=t.jQuery,c=0,f={};s.namespace="outlayer",s.Item=i,s.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var l=s.prototype;o.extend(l,e.prototype),l.option=function(t){o.extend(this.options,t)},l._getOption=function(t){var e=this.constructor.compatOptions[t];return e&&void 0!==this.options[e]?this.options[e]:this.options[t]},s.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},l._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),o.extend(this.element.style,this.options.containerStyle),this._getOption("resize")&&this.bindResize()},l.reloadItems=function(){this.items=this._itemize(this.element.children)},l._itemize=function(t){for(var e=this._filterFindItemElements(t),n=this.constructor.Item,i=[],r=0;r<e.length;r++){var o=new n(e[r],this);i.push(o)}return i},l._filterFindItemElements=function(t){return o.filterFindElements(t,this.options.itemSelector)},l.getItemElements=function(){return this.items.map(function(t){return t.element})},l.layout=function(){this._resetLayout(),this._manageStamps();var t=this._getOption("layoutInstant"),e=void 0!==t?t:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},l._init=l.layout,l._resetLayout=function(){this.getSize()},l.getSize=function(){this.size=r(this.element)},l._getMeasurement=function(t,e){var n,i=this.options[t];i?("string"==typeof i?n=this.element.querySelector(i):i instanceof HTMLElement&&(n=i),this[t]=n?r(n)[e]:i):this[t]=0},l.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},l._getItemsForLayout=function(t){return t.filter(function(t){return!t.isIgnored})},l._layoutItems=function(t,n){if(this._emitCompleteOnItems("layout",t),t&&t.length){var i=[];t.forEach(function(t){var e=this._getItemLayoutPosition(t);e.item=t,e.isInstant=n||t.isLayoutInstant,i.push(e)},this),this._processLayoutQueue(i)}},l._getItemLayoutPosition=function(){return{x:0,y:0}},l._processLayoutQueue=function(t){this.updateStagger(),t.forEach(function(t,e){this._positionItem(t.item,t.x,t.y,t.isInstant,e)},this)},l.updateStagger=function(){var t=this.options.stagger;return null==t?void(this.stagger=0):(this.stagger=function(t){if("number"==typeof t)return t;var e=t.match(/(^\d*\.?\d*)(\w*)/),n=e&&e[1],i=e&&e[2];return n.length?(n=parseFloat(n))*(d[i]||1):0}(t),this.stagger)},l._positionItem=function(t,e,n,i,r){i?t.goTo(e,n):(t.stagger(r*this.stagger),t.moveTo(e,n))},l._postLayout=function(){this.resizeContainer()},l.resizeContainer=function(){if(this._getOption("resizeContainer")){var t=this._getContainerSize();t&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))}},l._getContainerSize=n,l._setContainerMeasure=function(t,e){if(void 0!==t){var n=this.size;n.isBorderBox&&(t+=e?n.paddingLeft+n.paddingRight+n.borderLeftWidth+n.borderRightWidth:n.paddingBottom+n.paddingTop+n.borderTopWidth+n.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},l._emitCompleteOnItems=function(e,t){function n(){r.dispatchEvent(e+"Complete",null,[t])}function i(){++s==o&&n()}var r=this,o=t.length;if(t&&o){var s=0;t.forEach(function(t){t.once(e,i)})}else n()},l.dispatchEvent=function(t,e,n){var i=e?[e].concat(n):n;if(this.emitEvent(t,i),h)if(this.$element=this.$element||h(this.element),e){var r=h.Event(e);r.type=t,this.$element.trigger(r,n)}else this.$element.trigger(t,n)},l.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},l.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},l.stamp=function(t){(t=this._find(t))&&(this.stamps=this.stamps.concat(t),t.forEach(this.ignore,this))},l.unstamp=function(t){(t=this._find(t))&&t.forEach(function(t){o.removeFrom(this.stamps,t),this.unignore(t)},this)},l._find=function(t){return t?("string"==typeof t&&(t=this.element.querySelectorAll(t)),t=o.makeArray(t)):void 0},l._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},l._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},l._manageStamp=n,l._getElementOffset=function(t){var e=t.getBoundingClientRect(),n=this._boundingRect,i=r(t);return{left:e.left-n.left-i.marginLeft,top:e.top-n.top-i.marginTop,right:n.right-e.right-i.marginRight,bottom:n.bottom-e.bottom-i.marginBottom}},l.handleEvent=o.handleEvent,l.bindResize=function(){t.addEventListener("resize",this),this.isResizeBound=!0},l.unbindResize=function(){t.removeEventListener("resize",this),this.isResizeBound=!1},l.onresize=function(){this.resize()},o.debounceMethod(s,"onresize",100),l.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},l.needsResizeLayout=function(){var t=r(this.element);return this.size&&t&&t.innerWidth!==this.size.innerWidth},l.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},l.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},l.prepended=function(t){var e=this._itemize(t);if(e.length){var n=this.items.slice(0);this.items=e.concat(n),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(n)}},l.reveal=function(t){if(this._emitCompleteOnItems("reveal",t),t&&t.length){var n=this.updateStagger();t.forEach(function(t,e){t.stagger(e*n),t.reveal()})}},l.hide=function(t){if(this._emitCompleteOnItems("hide",t),t&&t.length){var n=this.updateStagger();t.forEach(function(t,e){t.stagger(e*n),t.hide()})}},l.revealItemElements=function(t){var e=this.getItems(t);this.reveal(e)},l.hideItemElements=function(t){var e=this.getItems(t);this.hide(e)},l.getItem=function(t){for(var e=0;e<this.items.length;e++){var n=this.items[e];if(n.element==t)return n}},l.getItems=function(t){t=o.makeArray(t);var n=[];return t.forEach(function(t){var e=this.getItem(t);e&&n.push(e)},this),n},l.remove=function(t){var e=this.getItems(t);this._emitCompleteOnItems("remove",e),e&&e.length&&e.forEach(function(t){t.remove(),o.removeFrom(this.items,t)},this)},l.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="",this.items.forEach(function(t){t.destroy()}),this.unbindResize();var e=this.element.outlayerGUID;delete f[e],delete this.element.outlayerGUID,h&&h.removeData(this.element,this.constructor.namespace)},s.data=function(t){var e=(t=o.getQueryElement(t))&&t.outlayerGUID;return e&&f[e]},s.create=function(t,e){var n=a(s);return n.defaults=o.extend({},s.defaults),o.extend(n.defaults,e),n.compatOptions=o.extend({},s.compatOptions),n.namespace=t,n.data=s.data,n.Item=a(i),o.htmlInit(n,t),h&&h.bridget&&h.bridget(t,n),n};var d={ms:1,s:1e3};return s.Item=i,s}),function(t,e){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],e):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e(require("outlayer"),require("get-size")):t.Masonry=e(t.Outlayer,t.getSize)}(window,function(t,h){var e=t.create("masonry");e.compatOptions.fitWidth="isFitWidth";var n=e.prototype;return n._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var t=0;t<this.cols;t++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},n.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var t=this.items[0],e=t&&t.element;this.columnWidth=e&&h(e).outerWidth||this.containerWidth}var n=this.columnWidth+=this.gutter,i=this.containerWidth+this.gutter,r=i/n,o=n-i%n;r=Math[o&&o<1?"round":"floor"](r),this.cols=Math.max(r,1)},n.getContainerWidth=function(){var t=this._getOption("fitWidth")?this.element.parentNode:this.element,e=h(t);this.containerWidth=e&&e.innerWidth},n._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth%this.columnWidth,n=Math[e&&e<1?"round":"ceil"](t.size.outerWidth/this.columnWidth);n=Math.min(n,this.cols);for(var i=this[this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition"](n,t),r={x:this.columnWidth*i.col,y:i.y},o=i.y+t.size.outerHeight,s=n+i.col,a=i.col;a<s;a++)this.colYs[a]=o;return r},n._getTopColPosition=function(t){var e=this._getTopColGroup(t),n=Math.min.apply(Math,e);return{col:e.indexOf(n),y:n}},n._getTopColGroup=function(t){if(t<2)return this.colYs;for(var e=[],n=this.cols+1-t,i=0;i<n;i++)e[i]=this._getColGroupY(i,t);return e},n._getColGroupY=function(t,e){if(e<2)return this.colYs[t];var n=this.colYs.slice(t,t+e);return Math.max.apply(Math,n)},n._getHorizontalColPosition=function(t,e){var n=this.horizontalColIndex%this.cols;n=1<t&&n+t>this.cols?0:n;var i=e.size.outerWidth&&e.size.outerHeight;return this.horizontalColIndex=i?n+t:this.horizontalColIndex,{col:n,y:this._getColGroupY(n,t)}},n._manageStamp=function(t){var e=h(t),n=this._getElementOffset(t),i=this._getOption("originLeft")?n.left:n.right,r=i+e.outerWidth,o=Math.floor(i/this.columnWidth);o=Math.max(0,o);var s=Math.floor(r/this.columnWidth);s-=r%this.columnWidth?0:1,s=Math.min(this.cols-1,s);for(var a=(this._getOption("originTop")?n.top:n.bottom)+e.outerHeight,u=o;u<=s;u++)this.colYs[u]=Math.max(a,this.colYs[u])},n._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this._getOption("fitWidth")&&(t.width=this._getContainerFitWidth()),t},n._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},n.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!=this.containerWidth},e});